"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; } async function _asyncOptionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = await fn(value); } else if (op === 'call' || op === 'optionalCall') { value = await fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var _chunkBYLL2GK4js = require('./chunk-BYLL2GK4.js');var I=u=>{let l=[];if(!u.baseUrl)l.push("baseUrl is required");else if(typeof u.baseUrl!="string")l.push("baseUrl must be a string");else try{new URL(u.baseUrl)}catch (e2){l.push("baseUrl must be a valid URL")}return _optionalChain([u, 'access', _ => _.axiosConfig, 'optionalAccess', _2 => _2.timeout])!==void 0&&(typeof u.axiosConfig.timeout!="number"||u.axiosConfig.timeout<0)&&l.push("timeout must be a positive number"),l};var H=u=>{let l=I(u);if(l.length>0)throw _chunkBYLL2GK4js.a.call(void 0, {message:`Invalid configuration: ${l.join(", ")}`,code:"invalid_config"});let y=async(r,t,n)=>{if(u.middlewares)for(let e of u.middlewares)r==="before"&&e.before?await e.before(t):r==="after"&&e.after?await e.after(t,n):r==="onError"&&e.onError&&await e.onError(t,n)},f={...u},a=async r=>{try{await y("before",r);let t=await r.execute(f);return await y("after",r,t),t}catch(t){throw await y("onError",r,t),t}},x=r=>{let t=r||f.tenantId;return{payment:{create:n=>{let e=_chunkBYLL2GK4js.r.call(void 0, {payment:n,tenantId:t});return{execute:async()=>a(e)}},get:n=>{let e=_chunkBYLL2GK4js.s.call(void 0, {id:n,tenantId:t});return{execute:async()=>a(e)}},update:(n,e)=>{let s=_chunkBYLL2GK4js.t.call(void 0, {id:n,payment:e,tenantId:t});return{execute:async()=>a(s)}},delete:n=>{let e=_chunkBYLL2GK4js.w.call(void 0, {id:n,tenantId:t});return{execute:async()=>a(e)}},list:()=>{let e=_chunkBYLL2GK4js.u.call(void 0, {tenantId:t}).list(),s=c=>({where:c.where,limit:o=>{let m=c.limit(o);return s(m)},offset:o=>{let m=c.offset(o);return s(m)},all:()=>{let o=c.all();return s(o)},execute:async()=>{let o=c.execute();return a(o)}});return s(e)}},client:{create:n=>{let e=_chunkBYLL2GK4js.A.call(void 0, {clientData:n,tenantId:t});return{execute:async()=>a(e)}},get:n=>{let e=_chunkBYLL2GK4js.x.call(void 0, {clientId:n,tenantId:t});return{execute:async()=>a(e)}},update:(n,e)=>{let s=_chunkBYLL2GK4js.y.call(void 0, {clientId:n,updates:e,tenantId:t});return{execute:async()=>a(s)}},updateDocumentRecord:(n,e)=>{let s=_chunkBYLL2GK4js.z.call(void 0, {clientId:n,identifierId:e.id,updates:e,tenantId:t});return{execute:async()=>a(s)}},delete:n=>{let e=_chunkBYLL2GK4js.D.call(void 0, {clientId:n,tenantId:t});return{execute:async()=>a(e)}},for:n=>{let e=parseInt(n,10),c=_chunkBYLL2GK4js.P.call(void 0, {clientId:e,tenantId:t}).list(),o=async()=>{let i=c.execute();returnawait _asyncOptionalChain([(await a(i)), 'optionalAccess', async _3 => _3.savingsAccounts])||[]},m=i=>({where:i.where,execute:async()=>{let d=i.execute();return a(d)}});return{accounts:{get:i=>({execute:async()=>{let d=_chunkBYLL2GK4js.M.call(void 0, {id:i,tenantId:t});return a(d)}}),getFromList:i=>({execute:async()=>(await o()).find(p=>p.id===i)||null}),update:(i,d)=>{let p=_chunkBYLL2GK4js.N.call(void 0, {clientId:e,accountId:i,updates:d,tenantId:t});return{execute:async()=>a(p)}},delete:i=>{let d=_chunkBYLL2GK4js.O.call(void 0, {accountId:i,tenantId:t});return{execute:async()=>a(d)}},where:()=>({eq:()=>({list:()=>m(c)})}),list:()=>m(c)}}},list:()=>{let e=_chunkBYLL2GK4js.B.call(void 0, {tenantId:t}).list(),s=c=>({where:c.where,limit:o=>{let m=c.limit(o);return s(m)},offset:o=>{let m=c.offset(o);return s(m)},all:()=>{let o=c.all();return s(o)},execute:async()=>{let o=c.execute();return a(o)}});return s(e)}}}};return{setConfig:r=>{f=r},updateConfig:r=>{let t={...f,...r,axiosConfig:{...f.axiosConfig,...r.axiosConfig,headers:{..._optionalChain([f, 'access', _4 => _4.axiosConfig, 'optionalAccess', _5 => _5.headers]),..._optionalChain([r, 'access', _6 => _6.axiosConfig, 'optionalAccess', _7 => _7.headers])}}},n=I(t);if(n.length>0)throw _chunkBYLL2GK4js.a.call(void 0, {message:`Invalid configuration: ${n.join(", ")}`,code:"invalid_config"});f=t},resetConfig:()=>{f=u},request:a,tenant:r=>x(r),...x()}};exports.a = H;
