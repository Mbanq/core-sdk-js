"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var _chunkUD2TOWHPjs = require('./chunk-UD2TOWHP.js');var E=t=>{let n=[];if(!t.baseUrl)n.push("baseUrl is required");else if(typeof t.baseUrl!="string")n.push("baseUrl must be a string");else try{new URL(t.baseUrl)}catch (e2){n.push("baseUrl must be a valid URL")}return _optionalChain([t, 'access', _2 => _2.axiosConfig, 'optionalAccess', _3 => _3.timeout])!==void 0&&(typeof t.axiosConfig.timeout!="number"||t.axiosConfig.timeout<0)&&n.push("timeout must be a positive number"),n};var _zod = require('zod');var _=_zod.z.enum(["originatorName","originatorAccount","originatorBankRoutingCode","recipientName","recipientAccount","recipientBankRoutingCode","reference","traceNumber","externalId","clientId","dateFormat","locale","originatedBy","paymentRail","paymentType","fromValueDate","toValueDate","fromExecuteDate","toExecuteDate","status","fromReturnDate","toReturnDate","isSettlement","orderBy","sortOrder"]),h= exports.b =_zod.z.enum(["DRAFT","AML_SCREENING","AML_REJECTED","EXECUTION_SCHEDULED","EXECUTION_PROCESSING","EXECUTION_SUCCESS","EXECUTION_FAILURE","RETURNED","CANCELLED","COMPLIANCE_FAILURE","DELETED","UNKNOWN"]),C= exports.c =_zod.z.enum(["ACH","SAMEDAYACH","WIRE","SWIFT","INTERNAL","FXPAY","CARD"]),P= exports.d =_zod.z.enum(["CREDIT","DEBIT"]),T= exports.e =_zod.z.enum(["ASC","DESC"]),Ge=_.options,Ke=h.options,He=C.options,Ye=P.options,We=T.options,z=t=>_.parse(t),V=t=>h.parse(t),j=t=>C.parse(t),q=t=>P.parse(t),M=t=>T.parse(t),$=_zod.z.string().min(1),G=_zod.z.string().min(1),K=_zod.z.string().min(1),H=_zod.z.string().min(1),Y=_zod.z.string().min(1),W=_zod.z.string().min(1),X=_zod.z.string().min(1),J=_zod.z.string().min(1),Q=_zod.z.string().min(1),Z=_zod.z.union([_zod.z.string(),_zod.z.number()]),ee=_zod.z.string(),te=_zod.z.string(),ne=_zod.z.string(),O=_zod.z.string(),w=_zod.z.string(),A=_zod.z.string(),ae=_zod.z.boolean(),re=_zod.z.string(),oe=t=>$.parse(t),ie=t=>G.parse(t),se=t=>K.parse(t),ce=t=>H.parse(t),pe=t=>Y.parse(t),me=t=>W.parse(t),de=t=>X.parse(t),ue=t=>J.parse(t),le=t=>Q.parse(t),ye=t=>Z.parse(t),ge=t=>ee.parse(t),fe=t=>te.parse(t),xe=t=>ne.parse(t),Ie=t=>O.parse(t),he=t=>w.parse(t),Ce=t=>A.parse(t),Pe=t=>ae.parse(t),Re=t=>re.parse(t),Fe= exports.f ={originatorName:$.optional(),originatorAccount:G.optional(),originatorBankRoutingCode:K.optional(),recipientName:H.optional(),recipientAccount:Y.optional(),recipientBankRoutingCode:W.optional(),reference:X.optional(),traceNumber:J.optional(),externalId:Q.optional(),clientId:Z.optional(),dateFormat:ee.optional(),locale:te.optional(),originatedBy:ne.optional(),paymentRail:C.optional(),paymentType:P.optional(),fromValueDate:O.optional(),toValueDate:O.optional(),fromExecuteDate:w.optional(),toExecuteDate:w.optional(),status:h.optional(),fromReturnDate:A.optional(),toReturnDate:A.optional(),isSettlement:ae.optional(),orderBy:re.optional(),sortOrder:T.optional(),limit:_zod.z.number().positive().optional().describe("Maximum number of records to return. Defaults to 20 if not specified. Set to 0 to return all records."),offset:_zod.z.number().min(0).optional()},Xe= exports.g =_zod.z.object(Fe).partial();var Ue={id:_zod.z.number(),clientId:_zod.z.number(),amount:_zod.z.number().positive(),correlationId:_zod.z.string(),paymentType:P,paymentRail:C,recipient:_zod.z.object({cardId:_zod.z.string().optional(),recipientType:_zod.z.string(),address:_zod.z.object({line1:_zod.z.string().optional(),line2:_zod.z.string().optional(),stateCode:_zod.z.string().optional(),countryCode:_zod.z.string(),postalCode:_zod.z.string().optional()}),name:_zod.z.string()}),originator:_zod.z.object({accountId:_zod.z.string().optional(),recipientType:_zod.z.string(),address:_zod.z.object({line1:_zod.z.string().optional(),line2:_zod.z.string().optional(),stateCode:_zod.z.string().optional(),countryCode:_zod.z.string(),postalCode:_zod.z.string().optional()}),name:_zod.z.string()}),executedAt:_zod.z.string(),createdAt:_zod.z.string(),externalId:_zod.z.string(),status:h,paymentRailMetaData:_zod.z.record(_zod.z.string(),_zod.z.any()).optional(),currencyData:_zod.z.object({code:_zod.z.string(),name:_zod.z.string(),decimalPlaces:_zod.z.number(),displaySymbol:_zod.z.string(),nameCode:_zod.z.string(),currencyCodeInDigit:_zod.z.number(),isBaseCurrency:_zod.z.boolean()}),currency:_zod.z.string().min(3).max(3)},Se=_zod.z.object(Ue).catchall(_zod.z.any()),be=_zod.z.object({streetAddress:_zod.z.string().optional(),city:_zod.z.string().optional(),state:_zod.z.string().optional(),country:_zod.z.string().optional(),postalCode:_zod.z.string().optional()}).optional(),ke=_zod.z.object({name:_zod.z.string().optional(),identifier:_zod.z.string().optional(),address:be}).optional(),v=_zod.z.object({name:_zod.z.string(),identifier:_zod.z.string(),accountType:_zod.z.enum(["CHECKING","SAVINGS"]).optional(),address:be,agent:ke}),Le= exports.i ={amount:_zod.z.number().positive(),currency:_zod.z.string().min(3).max(3),paymentRail:C,paymentType:P,debtor:v,creditor:v,clientId:_zod.z.string().optional(),correspondent:v.optional(),exchangeRate:_zod.z.number().positive().optional(),externalId:_zod.z.string().optional(),reference:_zod.z.union([_zod.z.string(),_zod.z.array(_zod.z.string())]).optional(),paymentRailMetaData:_zod.z.record(_zod.z.string(),_zod.z.any()).optional(),chargeBearer:_zod.z.enum(["OUR","BEN","SHA"]).optional(),purposeCode:_zod.z.string().optional(),valueDate:_zod.z.string().optional(),executionDate:_zod.z.string().optional()},_e= exports.j =_zod.z.object(Le).catchall(_zod.z.any()).refine(t=>(t.paymentRail==="WIRE"||t.paymentRail==="SWIFT")&&t.creditor?t.creditor.address&&t.creditor.address.state&&t.creditor.address.country:!0,{message:"For WIRE transfers, recipient address with state and country is mandatory"}),ze= exports.k ={amount:_zod.z.number().positive().optional(),correspondent:_zod.z.object({name:_zod.z.string().optional(),identifier:_zod.z.string().optional(),accountType:_zod.z.string().optional()}).optional(),creditor:_zod.z.object({name:_zod.z.string().optional(),identifier:_zod.z.string().optional(),accountType:_zod.z.string().optional(),agent:_zod.z.object({name:_zod.z.string().optional(),identifier:_zod.z.string().optional()}).optional()}).optional(),debtor:_zod.z.object({name:_zod.z.string().optional(),identifier:_zod.z.string().optional(),accountType:_zod.z.string().optional(),agent:_zod.z.object({name:_zod.z.string().optional(),identifier:_zod.z.string().optional()}).optional()}).optional(),exchangeRate:_zod.z.number().positive().optional(),externalId:_zod.z.string().optional(),errorCode:_zod.z.string().optional(),errorMessage:_zod.z.string().optional(),reference:_zod.z.union([_zod.z.string(),_zod.z.array(_zod.z.string())]).optional(),paymentRailMetaData:_zod.z.record(_zod.z.string(),_zod.z.any()).optional(),status:h.optional()},Ve= exports.l =_zod.z.object(ze).catchall(_zod.z.any()),Je= exports.m =_zod.z.object({totalFilteredRecords:_zod.z.number(),pageItems:_zod.z.array(Se)}),S=t=>Se.parse(t),De=t=>_e.parse(t),Ee=t=>Ve.parse(t);var Qe=_zod.z.object({id:_zod.z.string(),clientId:_zod.z.number(),resourceId:_zod.z.number(),resourceIdentifier:_zod.z.string()});var je=t=>{try{z(t)}catch(n){throw n instanceof _zod.ZodError?_chunkUD2TOWHPjs.a.call(void 0, {message:`Invalid filter key: '${t}'. ${n.message}`,code:"invalid_filter_key"}):n}},qe=(t,n)=>{try{switch(t){case"status":V(n);break;case"paymentRail":j(n);break;case"paymentType":q(n);break;case"sortOrder":M(n);break;case"originatorName":oe(n);break;case"originatorAccount":ie(n);break;case"originatorBankRoutingCode":se(n);break;case"recipientName":ce(n);break;case"recipientAccount":pe(n);break;case"recipientBankRoutingCode":me(n);break;case"reference":de(n);break;case"traceNumber":ue(n);break;case"externalId":le(n);break;case"clientId":ye(n);break;case"dateFormat":ge(n);break;case"locale":fe(n);break;case"originatedBy":xe(n);break;case"fromValueDate":case"toValueDate":Ie(n);break;case"fromExecuteDate":case"toExecuteDate":he(n);break;case"fromReturnDate":case"toReturnDate":Ce(n);break;case"isSettlement":Pe(n);break;case"orderBy":Re(n);break;default:break}}catch(i){throw i instanceof _zod.ZodError?_chunkUD2TOWHPjs.a.call(void 0, {message:`Invalid value for '${t}': '${n}'. ${i.message}`,code:`invalid_${t}_value`}):i}},ve= exports.n =t=>({input:t,metadata:{commandName:"CreatePayment",path:"/v1/payments",method:"POST"},execute:async n=>{try{De(t.payment)}catch(a){throw a instanceof _zod.ZodError?_chunkUD2TOWHPjs.a.call(void 0, {message:`Invalid payment data: ${a.message}`,code:"invalid_payment_input"}):a}t.tenantId&&(n.tenantId=t.tenantId);let i=await _chunkUD2TOWHPjs.d.call(void 0, n);try{let a=await i.post("/v1/payments",t.payment);return S(a.data)}catch(a){_chunkUD2TOWHPjs.c.call(void 0, a)}}}),Oe= exports.o =t=>({input:t,metadata:{commandName:"GetPayment",path:`/v1/payments/${t.id}`,method:"GET"},execute:async n=>{t.tenantId&&(n.tenantId=t.tenantId);let i=await _chunkUD2TOWHPjs.d.call(void 0, n);try{let a=await i.get(`/v1/payments/${t.id}`);return S(a.data)}catch(a){_chunkUD2TOWHPjs.c.call(void 0, a)}}}),we= exports.p =t=>({input:t,metadata:{commandName:"UpdatePayment",path:`/v1/payments/${t.id}`,method:"PUT"},execute:async n=>{try{Ee(t.payment)}catch(a){throw a instanceof _zod.ZodError?_chunkUD2TOWHPjs.a.call(void 0, {message:`Invalid payment update data: ${a.message}`,code:"invalid_payment_update_input"}):a}t.tenantId&&(n.tenantId=t.tenantId);let i=await _chunkUD2TOWHPjs.d.call(void 0, n);try{let a=await i.put(`/v1/payments/${t.id}`,t.payment);return S(a.data)}catch(a){_chunkUD2TOWHPjs.c.call(void 0, a)}}}),R=(t,n,i,a)=>{if(n!==void 0&&n!==0&&n<=0)throw _chunkUD2TOWHPjs.a.call(void 0, {message:`Invalid limit: ${n}. Limit must be positive or 0 for fetching all records.`,code:"invalid_limit"});if(i!==void 0&&i<0)throw _chunkUD2TOWHPjs.a.call(void 0, {message:`Invalid offset: ${i}. Offset must be non-negative.`,code:"invalid_offset"});return{where:l=>(je(l),{eq:c=>(qe(l,c),R({...t,[l]:c},n,i,a))}),limit:l=>R(t,l,i,a),offset:l=>R(t,n,l,a),all:()=>R(t,0,i,a),execute:()=>{let l={locale:"en",originatedBy:"us",orderBy:"id",sortOrder:"DESC"},c={...l,...t,limit:n||200,offset:i||0};return{input:{filters:t,limit:n,offset:i,tenantId:a},metadata:{commandName:"ListPayments",path:"/v1/payments",method:"GET"},execute:async s=>{a&&(s.tenantId=a);let o=await _chunkUD2TOWHPjs.d.call(void 0, s);try{if(n===0){let r=[],d=i||0,m=0;do{let y={...l,...t,limit:200,offset:d},D=await o.get("/v1/payments",{params:y}),{totalFilteredRecords:Ne,pageItems:Be}=D.data;r.push(...Be),m=Ne,d+=200}while(d<m);return{totalFilteredRecords:m,pageItems:r}}else return(await o.get("/v1/payments",{params:c})).data}catch(r){_chunkUD2TOWHPjs.c.call(void 0, r)}}}}}},Ae=t=>({list:()=>R({},void 0,void 0,_optionalChain([t, 'optionalAccess', _4 => _4.tenantId]))}),rt= exports.q =(t,n)=>({input:{params:t,configuration:n},metadata:{commandName:"GetPayments",path:"/v1/payments",method:"GET"},execute:async i=>{n.tenantId&&(i.tenantId=n.tenantId);let a=await _chunkUD2TOWHPjs.d.call(void 0, i),u=[],I=t.limit||20,l=t.offset||0,c=0,r={...{locale:"en",originatedBy:"us",orderBy:"id",sortOrder:"DESC"},...(p=>{let m=["fromValueDate","toValueDate","fromExecuteDate","toExecuteDate","fromReturnDate","toReturnDate"].some(D=>p[D]!==void 0),y={...p};return m&&y.dateFormat===void 0&&(y.dateFormat="yyyy-MM-dd"),y})(t),limit:I,offset:l};try{if(t.limit===0){do{let p=await a.get("/v1/payments",{params:r}),{totalFilteredRecords:d,pageItems:m}=p.data;u.push(...m),c=d,l+=I}while(l<c);return{totalFilteredRecords:c,pageItems:u}}else return(await a.get("/v1/payments",{params:r})).data}catch(p){_chunkUD2TOWHPjs.c.call(void 0, p)}}}),Te=t=>({input:t,metadata:{commandName:"DeletePayment",path:`/v1/payments/${t.id}`,method:"DELETE"},execute:async n=>{t.tenantId&&(n.tenantId=t.tenantId);let i=await _chunkUD2TOWHPjs.d.call(void 0, n);try{await i.delete(`/v1/payments/${t.id}`)}catch(a){_chunkUD2TOWHPjs.c.call(void 0, a)}}});var mt=t=>{let n=E(t);if(n.length>0)throw _chunkUD2TOWHPjs.a.call(void 0, {message:`Invalid configuration: ${n.join(", ")}`,code:"invalid_config"});let i=async(c,s,o)=>{if(t.middlewares)for(let r of t.middlewares)c==="before"&&r.before?await r.before(s):c==="after"&&r.after?await r.after(s,o):c==="onError"&&r.onError&&await r.onError(s,o)},a={...t},u=async c=>{try{await i("before",c);let s=await c.execute(a);return await i("after",c,s),s}catch(s){throw await i("onError",c,s),s}},I=c=>{let s=c||a.tenantId;return{payment:{create:o=>{let r=ve({payment:o,tenantId:s});return{execute:async()=>u(r)}},get:o=>{let r=Oe({id:o,tenantId:s});return{execute:async()=>u(r)}},update:(o,r)=>{let p=we({id:o,payment:r,tenantId:s});return{execute:async()=>u(p)}},delete:o=>{let r=Te({id:o,tenantId:s});return{execute:async()=>u(r)}},list:()=>{let r=Ae({tenantId:s}).list(),p=d=>({where:d.where,limit:m=>{let y=d.limit(m);return p(y)},offset:m=>{let y=d.offset(m);return p(y)},all:()=>{let m=d.all();return p(m)},execute:async()=>{let m=d.execute();return u(m)}});return p(r)}},client:{create:o=>{let r=_chunkUD2TOWHPjs.h.call(void 0, {clientData:o,tenantId:s});return{execute:async()=>u(r)}},get:o=>{let r=_chunkUD2TOWHPjs.e.call(void 0, {clientId:o,tenantId:s});return{execute:async()=>u(r)}},update:(o,r)=>{let p=_chunkUD2TOWHPjs.f.call(void 0, {clientId:o,updates:r,tenantId:s});return{execute:async()=>u(p)}},updateDocumentRecord:(o,r)=>{let p=_chunkUD2TOWHPjs.g.call(void 0, {clientId:o,identifierId:r.id,updates:r,tenantId:s});return{execute:async()=>u(p)}},delete:o=>{let r=_chunkUD2TOWHPjs.k.call(void 0, {clientId:o,tenantId:s});return{execute:async()=>u(r)}},list:()=>{let r=_chunkUD2TOWHPjs.i.call(void 0, {tenantId:s}).list(),p=d=>({where:d.where,limit:m=>{let y=d.limit(m);return p(y)},offset:m=>{let y=d.offset(m);return p(y)},all:()=>{let m=d.all();return p(m)},execute:async()=>{let m=d.execute();return u(m)}});return p(r)}}}};return{setConfig:c=>{a=c},updateConfig:c=>{let s={...a,...c,axiosConfig:{...a.axiosConfig,...c.axiosConfig,headers:{..._optionalChain([a, 'access', _5 => _5.axiosConfig, 'optionalAccess', _6 => _6.headers]),..._optionalChain([c, 'access', _7 => _7.axiosConfig, 'optionalAccess', _8 => _8.headers])}}},o=E(s);if(o.length>0)throw _chunkUD2TOWHPjs.a.call(void 0, {message:`Invalid configuration: ${o.join(", ")}`,code:"invalid_config"});a=s},resetConfig:()=>{a=t},request:u,tenant:c=>I(c),...I()}};exports.a = _; exports.b = h; exports.c = C; exports.d = P; exports.e = T; exports.f = Fe; exports.g = Xe; exports.h = Ue; exports.i = Le; exports.j = _e; exports.k = ze; exports.l = Ve; exports.m = Je; exports.n = ve; exports.o = Oe; exports.p = we; exports.q = rt; exports.r = mt;
