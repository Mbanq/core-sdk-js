"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var _chunk62FPM434js = require('../chunk-62FPM434.js');var _chunkKYBDTUPKjs = require('../chunk-KYBDTUPK.js');var _axios = require('axios'); var _axios2 = _interopRequireDefault(_axios);var _momenttimezone = require('moment-timezone'); var _momenttimezone2 = _interopRequireDefault(_momenttimezone);var p=(t=new Date,e=!1,r=_nullishCoalesce(process.env.TIMEZONE, () => ("Europe/Berlin")))=>_momenttimezone2.default.call(void 0, t.getTime()).tz(r).utc(!e);var z=t=>({input:t,metadata:{commandName:"CreateTransfer",path:"/v1/transfers",method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkKYBDTUPKjs.d.call(void 0, e);try{return(await r.post("/v1/transfers",t.transfer)).data}catch(n){_chunkKYBDTUPKjs.c.call(void 0, n)}}}),B= exports.GetTransfer =t=>({input:t,metadata:{commandName:"GetTransfer",path:`/v1/transfers/${t.id}`,method:"GET"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkKYBDTUPKjs.d.call(void 0, e);try{return(await r.get(`/v1/transfers/${t.id}`)).data}catch(n){_chunkKYBDTUPKjs.c.call(void 0, n)}}}),H= exports.GetTransfers =t=>{let e={paymentType:t.paymentType||"ACH",status:t.transferStatus||"EXECUTION_SCHEDULED",toExecuteDate:t.executedAt||p().toISOString(!0).slice(0,10),locale:"en",dateFormat:"yyyy-MM-dd",associateClientData:!0,originatedBy:"us",accountType:t.accountType};return{input:t,metadata:{commandName:"GetTransfers",path:"/v1/transfers",method:"GET"},execute:async r=>{t.tenantId&&(r.tenantId=t.tenantId);let n=await _chunkKYBDTUPKjs.d.call(void 0, r),a=[],u=t.queryLimit||200,c=0,i=0,I={...e,limit:u,offset:c};try{do{let d=await n.get("/v1/transfers",{params:I}),{totalFilteredRecords:f,pageItems:C}=d.data;a.push(...C),i=f,c+=u}while(c<i);return a}catch(d){_chunkKYBDTUPKjs.c.call(void 0, d)}}}},Q= exports.MarkAsSuccess =t=>{let e={...t,paymentType:t.paymentType||"ACH"};return{input:t,metadata:{commandName:"MarkAsSuccess",path:"/v1/external-transfers?command=MARK_AS_SUCCESS",method:"POST"},execute:async r=>{t.tenantId&&(r.tenantId=t.tenantId);let n=await _chunkKYBDTUPKjs.d.call(void 0, r);try{return(await n.post("/v1/external-transfers?command=MARK_AS_SUCCESS",e)).data}catch(a){_chunkKYBDTUPKjs.c.call(void 0, a)}}}},Z= exports.MarkAsProcessing =t=>({input:t,metadata:{commandName:"MarkAsProcessing",path:"/v1/external-transfers?command=MARK_AS_PROCESSING",method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkKYBDTUPKjs.d.call(void 0, e);try{return(await r.post("/v1/external-transfers?command=MARK_AS_PROCESSING",t)).data}catch(n){_chunkKYBDTUPKjs.c.call(void 0, n)}}}),X= exports.MarkAsReturned =t=>({input:t,metadata:{commandName:"MarkAsReturned",path:"/v1/external-transfers?command=MARK_AS_RETURN",method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkKYBDTUPKjs.d.call(void 0, e);try{return(await r.post("/v1/external-transfers?command=MARK_AS_RETURN",{...t})).data}catch(n){_chunkKYBDTUPKjs.c.call(void 0, n)}}}),j= exports.LogFailTransfer =t=>{let e={...t.payload};return{input:t,metadata:{commandName:"LogFailTransfer",path:"/v1/external-transfers?command=LOG_FAILURE",method:"POST"},execute:async r=>{t.tenantId&&(r.tenantId=t.tenantId);let n=await _chunkKYBDTUPKjs.d.call(void 0, r);try{return(await n.post("/v1/external-transfers?command=LOG_FAILURE",e)).data}catch(a){throw _axios2.default.isAxiosError(a)?_chunkKYBDTUPKjs.a.call(void 0, {message:"LogFailTransfer command failed",statusCode:_optionalChain([a, 'access', _2 => _2.response, 'optionalAccess', _3 => _3.status]),code:a.code,requestId:_optionalChain([a, 'access', _4 => _4.response, 'optionalAccess', _5 => _5.headers, 'optionalAccess', _6 => _6["x-request-id"]]),originalError:a}):a}}}},J= exports.MarkAsFail =t=>({input:t,metadata:{commandName:"MarkAsFail",path:"/v1/external-transfers?command=MARK_AS_FAIL",method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkKYBDTUPKjs.d.call(void 0, e);try{return(await r.post("/v1/external-transfers?command=MARK_AS_FAIL",t)).data}catch(n){_chunkKYBDTUPKjs.c.call(void 0, n)}}}),V= exports.UpdateTraceNumber =t=>{let e={traceNumbers:t.traceNumbers};return{input:t,metadata:{commandName:"UpdateTraceNumber",path:`/v1/external-transfers/${t.externalId}`,method:"PUT"},execute:async r=>{t.tenantId&&(r.tenantId=t.tenantId);let n=await _chunkKYBDTUPKjs.d.call(void 0, r);try{return(await n.put(`/v1/external-transfers/${t.externalId}`,e)).data}catch(a){_chunkKYBDTUPKjs.c.call(void 0, a)}}}};var W=t=>({input:t,metadata:{commandName:t.commandName||"CustomUpdate",path:t.url,method:"PUT"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkKYBDTUPKjs.d.call(void 0, e);try{return(await r.put(t.url,{...t.updates},{params:t.params})).data}catch(n){_chunkKYBDTUPKjs.c.call(void 0, n)}}}),Y= exports.CustomCreate =t=>({input:t,metadata:{commandName:t.commandName||"CustomCreate",path:t.url,method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkKYBDTUPKjs.d.call(void 0, e);try{return(await r.post(t.url,t.data,{params:t.params})).data}catch(n){_chunkKYBDTUPKjs.c.call(void 0, n)}}}),tt= exports.CustomGet =t=>({input:t,metadata:{commandName:t.commandName||"CustomGet",path:t.url,method:"GET"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkKYBDTUPKjs.d.call(void 0, e);try{return(await r.get(t.url,{params:t.params})).data}catch(n){_chunkKYBDTUPKjs.c.call(void 0, n)}}});exports.CreateClient = _chunkKYBDTUPKjs.A; exports.CreatePayment = _chunkKYBDTUPKjs.r; exports.CreateRecipient = _chunkKYBDTUPKjs.S; exports.CreateTransfer = z; exports.CustomCreate = Y; exports.CustomGet = tt; exports.CustomUpdate = W; exports.DeleteAccount = _chunkKYBDTUPKjs.O; exports.DeleteClient = _chunkKYBDTUPKjs.D; exports.DeletePayment = _chunkKYBDTUPKjs.w; exports.DeleteRecipient = _chunkKYBDTUPKjs.T; exports.GetAccount = _chunkKYBDTUPKjs.M; exports.GetAccountsOfClient = _chunkKYBDTUPKjs.Q; exports.GetClient = _chunkKYBDTUPKjs.x; exports.GetClients = _chunkKYBDTUPKjs.C; exports.GetPayment = _chunkKYBDTUPKjs.s; exports.GetPayments = _chunkKYBDTUPKjs.v; exports.GetRecipient = _chunkKYBDTUPKjs.R; exports.GetRecipients = _chunkKYBDTUPKjs.V; exports.GetTransfer = B; exports.GetTransfers = H; exports.GetUserDetail = _chunkKYBDTUPKjs.Y; exports.GraphQL = _chunkKYBDTUPKjs.W; exports.ListAccountsOfClient = _chunkKYBDTUPKjs.P; exports.LogFailTransfer = j; exports.MarkAsFail = J; exports.MarkAsProcessing = Z; exports.MarkAsReturned = X; exports.MarkAsSuccess = Q; exports.SendAuthorizationToCore = _chunk62FPM434js.a; exports.UpdateAccount = _chunkKYBDTUPKjs.N; exports.UpdateCardID = _chunk62FPM434js.b; exports.UpdateClient = _chunkKYBDTUPKjs.y; exports.UpdateClientIdentifier = _chunkKYBDTUPKjs.z; exports.UpdatePayment = _chunkKYBDTUPKjs.t; exports.UpdateRecipient = _chunkKYBDTUPKjs.X; exports.UpdateTraceNumber = V;
