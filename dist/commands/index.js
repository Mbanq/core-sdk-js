"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var _chunkWANY7FS3js = require('../chunk-WANY7FS3.js');var _chunkBYLL2GK4js = require('../chunk-BYLL2GK4.js');var _axios = require('axios'); var _axios2 = _interopRequireDefault(_axios);var _momenttimezone = require('moment-timezone'); var _momenttimezone2 = _interopRequireDefault(_momenttimezone);var p=(t=new Date,e=!1,r=_nullishCoalesce(process.env.TIMEZONE, () => ("Europe/Berlin")))=>_momenttimezone2.default.call(void 0, t.getTime()).tz(r).utc(!e);var D=t=>({input:t,metadata:{commandName:"CreateTransfer",path:"/v1/transfers",method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkBYLL2GK4js.d.call(void 0, e);try{return(await r.post("/v1/transfers",t.transfer)).data}catch(n){_chunkBYLL2GK4js.c.call(void 0, n)}}}),F= exports.GetTransfer =t=>({input:t,metadata:{commandName:"GetTransfer",path:`/v1/transfers/${t.id}`,method:"GET"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkBYLL2GK4js.d.call(void 0, e);try{return(await r.get(`/v1/transfers/${t.id}`)).data}catch(n){_chunkBYLL2GK4js.c.call(void 0, n)}}}),L= exports.GetTransfers =t=>{let e={paymentType:t.paymentType||"ACH",status:t.transferStatus||"EXECUTION_SCHEDULED",toExecuteDate:t.executedAt||p().toISOString(!0).slice(0,10),locale:"en",dateFormat:"yyyy-MM-dd",associateClientData:!0,originatedBy:"us",accountType:t.accountType};return{input:t,metadata:{commandName:"GetTransfers",path:"/v1/transfers",method:"GET"},execute:async r=>{t.tenantId&&(r.tenantId=t.tenantId);let n=await _chunkBYLL2GK4js.d.call(void 0, r),a=[],c=t.queryLimit||200,u=0,i=0,I={...e,limit:c,offset:u};try{do{let d=await n.get("/v1/transfers",{params:I}),{totalFilteredRecords:f,pageItems:C}=d.data;a.push(...C),i=f,u+=c}while(u<i);return a}catch(d){_chunkBYLL2GK4js.c.call(void 0, d)}}}},K= exports.MarkAsSuccess =t=>{let e={...t,paymentType:t.paymentType||"ACH"};return{input:t,metadata:{commandName:"MarkAsSuccess",path:"/v1/external-transfers?command=MARK_AS_SUCCESS",method:"POST"},execute:async r=>{t.tenantId&&(r.tenantId=t.tenantId);let n=await _chunkBYLL2GK4js.d.call(void 0, r);try{return(await n.post("/v1/external-transfers?command=MARK_AS_SUCCESS",e)).data}catch(a){_chunkBYLL2GK4js.c.call(void 0, a)}}}},q= exports.MarkAsProcessing =t=>({input:t,metadata:{commandName:"MarkAsProcessing",path:"/v1/external-transfers?command=MARK_AS_PROCESSING",method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkBYLL2GK4js.d.call(void 0, e);try{return(await r.post("/v1/external-transfers?command=MARK_AS_PROCESSING",t)).data}catch(n){_chunkBYLL2GK4js.c.call(void 0, n)}}}),$= exports.MarkAsReturned =t=>({input:t,metadata:{commandName:"MarkAsReturned",path:"/v1/external-transfers?command=MARK_AS_RETURN",method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkBYLL2GK4js.d.call(void 0, e);try{return(await r.post("/v1/external-transfers?command=MARK_AS_RETURN",{...t})).data}catch(n){_chunkBYLL2GK4js.c.call(void 0, n)}}}),z= exports.LogFailTransfer =t=>{let e={...t.payload};return{input:t,metadata:{commandName:"LogFailTransfer",path:"/v1/external-transfers?command=LOG_FAILURE",method:"POST"},execute:async r=>{t.tenantId&&(r.tenantId=t.tenantId);let n=await _chunkBYLL2GK4js.d.call(void 0, r);try{return(await n.post("/v1/external-transfers?command=LOG_FAILURE",e)).data}catch(a){throw _axios2.default.isAxiosError(a)?_chunkBYLL2GK4js.a.call(void 0, {message:"LogFailTransfer command failed",statusCode:_optionalChain([a, 'access', _2 => _2.response, 'optionalAccess', _3 => _3.status]),code:a.code,requestId:_optionalChain([a, 'access', _4 => _4.response, 'optionalAccess', _5 => _5.headers, 'optionalAccess', _6 => _6["x-request-id"]]),originalError:a}):a}}}},B= exports.MarkAsFail =t=>({input:t,metadata:{commandName:"MarkAsFail",path:"/v1/external-transfers?command=MARK_AS_FAIL",method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkBYLL2GK4js.d.call(void 0, e);try{return(await r.post("/v1/external-transfers?command=MARK_AS_FAIL",t)).data}catch(n){_chunkBYLL2GK4js.c.call(void 0, n)}}}),H= exports.UpdateTraceNumber =t=>{let e={traceNumbers:t.traceNumbers};return{input:t,metadata:{commandName:"UpdateTraceNumber",path:`/v1/external-transfers/${t.externalId}`,method:"PUT"},execute:async r=>{t.tenantId&&(r.tenantId=t.tenantId);let n=await _chunkBYLL2GK4js.d.call(void 0, r);try{return(await n.put(`/v1/external-transfers/${t.externalId}`,e)).data}catch(a){_chunkBYLL2GK4js.c.call(void 0, a)}}}};var Z=t=>({input:t,metadata:{commandName:t.commandName||"CustomUpdate",path:t.url,method:"PUT"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkBYLL2GK4js.d.call(void 0, e);try{return(await r.put(t.url,{...t.updates},{params:t.params})).data}catch(n){_chunkBYLL2GK4js.c.call(void 0, n)}}}),Q= exports.CustomCreate =t=>({input:t,metadata:{commandName:t.commandName||"CustomCreate",path:t.url,method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkBYLL2GK4js.d.call(void 0, e);try{return(await r.post(t.url,t.data,{params:t.params})).data}catch(n){_chunkBYLL2GK4js.c.call(void 0, n)}}}),X= exports.CustomGet =t=>({input:t,metadata:{commandName:t.commandName||"CustomGet",path:t.url,method:"GET"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunkBYLL2GK4js.d.call(void 0, e);try{return(await r.get(t.url,{params:t.params})).data}catch(n){_chunkBYLL2GK4js.c.call(void 0, n)}}});exports.CreateClient = _chunkBYLL2GK4js.A; exports.CreatePayment = _chunkBYLL2GK4js.r; exports.CreateTransfer = D; exports.CustomCreate = Q; exports.CustomGet = X; exports.CustomUpdate = Z; exports.DeleteAccount = _chunkBYLL2GK4js.O; exports.DeleteClient = _chunkBYLL2GK4js.D; exports.DeletePayment = _chunkBYLL2GK4js.w; exports.GetAccount = _chunkBYLL2GK4js.M; exports.GetAccountsOfClient = _chunkBYLL2GK4js.Q; exports.GetClient = _chunkBYLL2GK4js.x; exports.GetClients = _chunkBYLL2GK4js.C; exports.GetPayment = _chunkBYLL2GK4js.s; exports.GetPayments = _chunkBYLL2GK4js.v; exports.GetTransfer = F; exports.GetTransfers = L; exports.GraphQL = _chunkWANY7FS3js.c; exports.ListAccountsOfClient = _chunkBYLL2GK4js.P; exports.LogFailTransfer = z; exports.MarkAsFail = B; exports.MarkAsProcessing = q; exports.MarkAsReturned = $; exports.MarkAsSuccess = K; exports.SendAuthorizationToCore = _chunkWANY7FS3js.a; exports.UpdateAccount = _chunkBYLL2GK4js.N; exports.UpdateCardID = _chunkWANY7FS3js.b; exports.UpdateClient = _chunkBYLL2GK4js.y; exports.UpdateClientIdentifier = _chunkBYLL2GK4js.z; exports.UpdatePayment = _chunkBYLL2GK4js.t; exports.UpdateTraceNumber = H;
