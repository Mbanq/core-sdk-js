"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var _chunkF2S5TVGHjs = require('../chunk-F2S5TVGH.js');var _chunk2INAYVT5js = require('../chunk-2INAYVT5.js');var _axios = require('axios'); var _axios2 = _interopRequireDefault(_axios);var _momenttimezone = require('moment-timezone'); var _momenttimezone2 = _interopRequireDefault(_momenttimezone);var p=(t=new Date,e=!1,r=_nullishCoalesce(process.env.TIMEZONE, () => ("Europe/Berlin")))=>_momenttimezone2.default.call(void 0, t.getTime()).tz(r).utc(!e);var $=t=>({input:t,metadata:{commandName:"CreateTransfer",path:"/v1/transfers",method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunk2INAYVT5js.d.call(void 0, e);try{return(await r.post("/v1/transfers",t.transfer)).data}catch(n){_chunk2INAYVT5js.c.call(void 0, n)}}}),z= exports.GetTransfer =t=>({input:t,metadata:{commandName:"GetTransfer",path:`/v1/transfers/${t.id}`,method:"GET"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunk2INAYVT5js.d.call(void 0, e);try{return(await r.get(`/v1/transfers/${t.id}`)).data}catch(n){_chunk2INAYVT5js.c.call(void 0, n)}}}),B= exports.GetTransfers =t=>{let e={paymentType:t.paymentType||"ACH",status:t.transferStatus||"EXECUTION_SCHEDULED",toExecuteDate:t.executedAt||p().toISOString(!0).slice(0,10),locale:"en",dateFormat:"yyyy-MM-dd",associateClientData:!0,originatedBy:"us",accountType:t.accountType};return{input:t,metadata:{commandName:"GetTransfers",path:"/v1/transfers",method:"GET"},execute:async r=>{t.tenantId&&(r.tenantId=t.tenantId);let n=await _chunk2INAYVT5js.d.call(void 0, r),a=[],u=t.queryLimit||200,c=0,i=0,I={...e,limit:u,offset:c};try{do{let d=await n.get("/v1/transfers",{params:I}),{totalFilteredRecords:f,pageItems:C}=d.data;a.push(...C),i=f,c+=u}while(c<i);return a}catch(d){_chunk2INAYVT5js.c.call(void 0, d)}}}},H= exports.MarkAsSuccess =t=>{let e={...t,paymentType:t.paymentType||"ACH"};return{input:t,metadata:{commandName:"MarkAsSuccess",path:"/v1/external-transfers?command=MARK_AS_SUCCESS",method:"POST"},execute:async r=>{t.tenantId&&(r.tenantId=t.tenantId);let n=await _chunk2INAYVT5js.d.call(void 0, r);try{return(await n.post("/v1/external-transfers?command=MARK_AS_SUCCESS",e)).data}catch(a){_chunk2INAYVT5js.c.call(void 0, a)}}}},Q= exports.MarkAsProcessing =t=>({input:t,metadata:{commandName:"MarkAsProcessing",path:"/v1/external-transfers?command=MARK_AS_PROCESSING",method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunk2INAYVT5js.d.call(void 0, e);try{return(await r.post("/v1/external-transfers?command=MARK_AS_PROCESSING",t)).data}catch(n){_chunk2INAYVT5js.c.call(void 0, n)}}}),Z= exports.MarkAsReturned =t=>({input:t,metadata:{commandName:"MarkAsReturned",path:"/v1/external-transfers?command=MARK_AS_RETURN",method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunk2INAYVT5js.d.call(void 0, e);try{return(await r.post("/v1/external-transfers?command=MARK_AS_RETURN",{...t})).data}catch(n){_chunk2INAYVT5js.c.call(void 0, n)}}}),X= exports.LogFailTransfer =t=>{let e={...t.payload};return{input:t,metadata:{commandName:"LogFailTransfer",path:"/v1/external-transfers?command=LOG_FAILURE",method:"POST"},execute:async r=>{t.tenantId&&(r.tenantId=t.tenantId);let n=await _chunk2INAYVT5js.d.call(void 0, r);try{return(await n.post("/v1/external-transfers?command=LOG_FAILURE",e)).data}catch(a){throw _axios2.default.isAxiosError(a)?_chunk2INAYVT5js.a.call(void 0, {message:"LogFailTransfer command failed",statusCode:_optionalChain([a, 'access', _2 => _2.response, 'optionalAccess', _3 => _3.status]),code:a.code,requestId:_optionalChain([a, 'access', _4 => _4.response, 'optionalAccess', _5 => _5.headers, 'optionalAccess', _6 => _6["x-request-id"]]),originalError:a}):a}}}},j= exports.MarkAsFail =t=>({input:t,metadata:{commandName:"MarkAsFail",path:"/v1/external-transfers?command=MARK_AS_FAIL",method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunk2INAYVT5js.d.call(void 0, e);try{return(await r.post("/v1/external-transfers?command=MARK_AS_FAIL",t)).data}catch(n){_chunk2INAYVT5js.c.call(void 0, n)}}}),J= exports.UpdateTraceNumber =t=>{let e={traceNumbers:t.traceNumbers};return{input:t,metadata:{commandName:"UpdateTraceNumber",path:`/v1/external-transfers/${t.externalId}`,method:"PUT"},execute:async r=>{t.tenantId&&(r.tenantId=t.tenantId);let n=await _chunk2INAYVT5js.d.call(void 0, r);try{return(await n.put(`/v1/external-transfers/${t.externalId}`,e)).data}catch(a){_chunk2INAYVT5js.c.call(void 0, a)}}}};var V=t=>({input:t,metadata:{commandName:t.commandName||"CustomUpdate",path:t.url,method:"PUT"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunk2INAYVT5js.d.call(void 0, e);try{return(await r.put(t.url,{...t.updates},{params:t.params})).data}catch(n){_chunk2INAYVT5js.c.call(void 0, n)}}}),W= exports.CustomCreate =t=>({input:t,metadata:{commandName:t.commandName||"CustomCreate",path:t.url,method:"POST"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunk2INAYVT5js.d.call(void 0, e);try{return(await r.post(t.url,t.data,{params:t.params})).data}catch(n){_chunk2INAYVT5js.c.call(void 0, n)}}}),Y= exports.CustomGet =t=>({input:t,metadata:{commandName:t.commandName||"CustomGet",path:t.url,method:"GET"},execute:async e=>{t.tenantId&&(e.tenantId=t.tenantId);let r=await _chunk2INAYVT5js.d.call(void 0, e);try{return(await r.get(t.url,{params:t.params})).data}catch(n){_chunk2INAYVT5js.c.call(void 0, n)}}});exports.CreateClient = _chunk2INAYVT5js.A; exports.CreatePayment = _chunk2INAYVT5js.r; exports.CreateRecipient = _chunk2INAYVT5js.S; exports.CreateTransfer = $; exports.CustomCreate = W; exports.CustomGet = Y; exports.CustomUpdate = V; exports.DeleteAccount = _chunk2INAYVT5js.O; exports.DeleteClient = _chunk2INAYVT5js.D; exports.DeletePayment = _chunk2INAYVT5js.w; exports.DeleteRecipient = _chunk2INAYVT5js.T; exports.GetAccount = _chunk2INAYVT5js.M; exports.GetAccountsOfClient = _chunk2INAYVT5js.Q; exports.GetClient = _chunk2INAYVT5js.x; exports.GetClients = _chunk2INAYVT5js.C; exports.GetPayment = _chunk2INAYVT5js.s; exports.GetPayments = _chunk2INAYVT5js.v; exports.GetRecipient = _chunk2INAYVT5js.R; exports.GetRecipients = _chunk2INAYVT5js.V; exports.GetTransfer = z; exports.GetTransfers = B; exports.GraphQL = _chunk2INAYVT5js.W; exports.ListAccountsOfClient = _chunk2INAYVT5js.P; exports.LogFailTransfer = X; exports.MarkAsFail = j; exports.MarkAsProcessing = Q; exports.MarkAsReturned = Z; exports.MarkAsSuccess = H; exports.SendAuthorizationToCore = _chunkF2S5TVGHjs.a; exports.UpdateAccount = _chunk2INAYVT5js.N; exports.UpdateCardID = _chunkF2S5TVGHjs.b; exports.UpdateClient = _chunk2INAYVT5js.y; exports.UpdateClientIdentifier = _chunk2INAYVT5js.z; exports.UpdatePayment = _chunk2INAYVT5js.t; exports.UpdateRecipient = _chunk2INAYVT5js.X; exports.UpdateTraceNumber = J;
