"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; } async function _asyncOptionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = await fn(value); } else if (op === 'call' || op === 'optionalCall') { value = await fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var _chunkCOJW3SUNjs = require('./chunk-COJW3SUN.js');var w=d=>{let p=[];if(!d.baseUrl)p.push("baseUrl is required");else if(typeof d.baseUrl!="string")p.push("baseUrl must be a string");else try{new URL(d.baseUrl)}catch (e2){p.push("baseUrl must be a valid URL")}return _optionalChain([d, 'access', _2 => _2.axiosConfig, 'optionalAccess', _3 => _3.timeout])!==void 0&&(typeof d.axiosConfig.timeout!="number"||d.axiosConfig.timeout<0)&&p.push("timeout must be a positive number"),p};var Z=d=>{let p=w(d);if(p.length>0)throw _chunkCOJW3SUNjs.a.call(void 0, {message:`Invalid configuration: ${p.join(", ")}`,code:"invalid_config"});let C=async(o,t,n)=>{if(d.middlewares)for(let e of d.middlewares)o==="before"&&e.before?await e.before(t):o==="after"&&e.after?await e.after(t,n):o==="onError"&&e.onError&&await e.onError(t,n)},f={...d},a=async o=>{try{await C("before",o);let t=await o.execute(f);return await C("after",o,t),t}catch(t){throw await C("onError",o,t),t}},x=o=>{let t=o||f.tenantId;return{payment:{create:n=>{let e=_chunkCOJW3SUNjs.r.call(void 0, {payment:n,tenantId:t});return{execute:async()=>a(e)}},get:n=>{let e=_chunkCOJW3SUNjs.s.call(void 0, {id:n,tenantId:t});return{execute:async()=>a(e)}},update:(n,e)=>{let s=_chunkCOJW3SUNjs.t.call(void 0, {id:n,payment:e,tenantId:t});return{execute:async()=>a(s)}},delete:n=>{let e=_chunkCOJW3SUNjs.w.call(void 0, {id:n,tenantId:t});return{execute:async()=>a(e)}},list:()=>{let e=_chunkCOJW3SUNjs.u.call(void 0, {tenantId:t}).list(),s=u=>({where:u.where,limit:i=>{let m=u.limit(i);return s(m)},offset:i=>{let m=u.offset(i);return s(m)},all:()=>{let i=u.all();return s(i)},execute:async()=>{let i=u.execute();return a(i)}});return s(e)}},client:{create:n=>{let e=_chunkCOJW3SUNjs.A.call(void 0, {clientData:n,tenantId:t});return{execute:async()=>a(e)}},get:n=>{let e=_chunkCOJW3SUNjs.x.call(void 0, {clientId:n,tenantId:t});return{execute:async()=>a(e)}},update:(n,e)=>{let s=_chunkCOJW3SUNjs.y.call(void 0, {clientId:n,updates:e,tenantId:t});return{execute:async()=>a(s)}},updateDocumentRecord:(n,e)=>{let s=_chunkCOJW3SUNjs.z.call(void 0, {clientId:n,identifierId:e.id,updates:e,tenantId:t});return{execute:async()=>a(s)}},delete:n=>{let e=_chunkCOJW3SUNjs.D.call(void 0, {clientId:n,tenantId:t});return{execute:async()=>a(e)}},for:n=>{let e=parseInt(n,10),u=_chunkCOJW3SUNjs.P.call(void 0, {clientId:e,tenantId:t}).list(),m=_chunkCOJW3SUNjs.U.call(void 0, {clientId:e,tenantId:t}).list(),H=async()=>{let r=u.execute();returnawait _asyncOptionalChain([(await a(r)), 'optionalAccess', async _4 => _4.savingsAccounts])||[]},y=r=>({where:c=>{let l=r.where?r.where(c):r;return{eq:N=>{let g=l.eq?l.eq(N):l;return{where:Q=>y(g).where(Q),list:()=>y(g)}}}},execute:async()=>{let c=r.execute();return a(c)}});return{accounts:{get:r=>({execute:async()=>{let c=_chunkCOJW3SUNjs.M.call(void 0, {id:r,tenantId:t});return a(c)}}),getFromList:r=>({execute:async()=>(await H()).find(l=>l.id===r)||null}),update:(r,c)=>{let l=_chunkCOJW3SUNjs.N.call(void 0, {clientId:e,accountId:r,updates:c,tenantId:t});return{execute:async()=>a(l)}},delete:r=>{let c=_chunkCOJW3SUNjs.O.call(void 0, {accountId:r,tenantId:t});return{execute:async()=>a(c)}},where:r=>y(u).where(r),list:()=>y(u)},recipients:{create:r=>{let c=_chunkCOJW3SUNjs.S.call(void 0, {clientId:e,recipient:r,tenantId:t});return{execute:async()=>a(c)}},get:r=>({execute:async()=>{let c=_chunkCOJW3SUNjs.R.call(void 0, {clientId:e,id:r,tenantId:t});return a(c)}}),update:(r,c)=>{let l=_chunkCOJW3SUNjs.X.call(void 0, {id:r,input:c,tenantId:t});return{execute:async()=>a(l)}},delete:r=>{let c=_chunkCOJW3SUNjs.T.call(void 0, {clientId:e,recipientId:r,tenantId:t});return{execute:async()=>a(c)}},where:r=>y(m).where(r),list:()=>y(m)}}},list:()=>{let e=_chunkCOJW3SUNjs.B.call(void 0, {tenantId:t}).list(),s=u=>({where:u.where,limit:i=>{let m=u.limit(i);return s(m)},offset:i=>{let m=u.offset(i);return s(m)},all:()=>{let i=u.all();return s(i)},execute:async()=>{let i=u.execute();return a(i)}});return s(e)}}}};return{setConfig:o=>{f=o},updateConfig:o=>{let t={...f,...o,axiosConfig:{...f.axiosConfig,...o.axiosConfig,headers:{..._optionalChain([f, 'access', _5 => _5.axiosConfig, 'optionalAccess', _6 => _6.headers]),..._optionalChain([o, 'access', _7 => _7.axiosConfig, 'optionalAccess', _8 => _8.headers])}}},n=w(t);if(n.length>0)throw _chunkCOJW3SUNjs.a.call(void 0, {message:`Invalid configuration: ${n.join(", ")}`,code:"invalid_config"});f=t},resetConfig:()=>{f=d},request:a,tenant:o=>x(o),...x()}};exports.a = Z;
