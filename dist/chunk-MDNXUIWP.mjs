import{a as g,c as f,d as x,e as N,f as B,g as F,h as U,i as k,k as L}from"./chunk-SQZ4PAOL.mjs";var E=t=>{let n=[];if(!t.baseUrl)n.push("baseUrl is required");else if(typeof t.baseUrl!="string")n.push("baseUrl must be a string");else try{new URL(t.baseUrl)}catch{n.push("baseUrl must be a valid URL")}return t.axiosConfig?.timeout!==void 0&&(typeof t.axiosConfig.timeout!="number"||t.axiosConfig.timeout<0)&&n.push("timeout must be a positive number"),n};import{z as e}from"zod";var _=e.enum(["originatorName","originatorAccount","originatorBankRoutingCode","recipientName","recipientAccount","recipientBankRoutingCode","reference","traceNumber","externalId","clientId","dateFormat","locale","originatedBy","paymentRail","paymentType","fromValueDate","toValueDate","fromExecuteDate","toExecuteDate","status","fromReturnDate","toReturnDate","isSettlement","orderBy","sortOrder"]),h=e.enum(["DRAFT","AML_SCREENING","AML_REJECTED","EXECUTION_SCHEDULED","EXECUTION_PROCESSING","EXECUTION_SUCCESS","EXECUTION_FAILURE","RETURNED","CANCELLED","COMPLIANCE_FAILURE","DELETED","UNKNOWN"]),C=e.enum(["ACH","SAMEDAYACH","WIRE","SWIFT","INTERNAL","FXPAY","CARD"]),P=e.enum(["CREDIT","DEBIT"]),T=e.enum(["ASC","DESC"]),Ge=_.options,Ke=h.options,He=C.options,Ye=P.options,We=T.options,z=t=>_.parse(t),V=t=>h.parse(t),j=t=>C.parse(t),q=t=>P.parse(t),M=t=>T.parse(t),$=e.string().min(1),G=e.string().min(1),K=e.string().min(1),H=e.string().min(1),Y=e.string().min(1),W=e.string().min(1),X=e.string().min(1),J=e.string().min(1),Q=e.string().min(1),Z=e.union([e.string(),e.number()]),ee=e.string(),te=e.string(),ne=e.string(),O=e.string(),w=e.string(),A=e.string(),ae=e.boolean(),re=e.string(),oe=t=>$.parse(t),ie=t=>G.parse(t),se=t=>K.parse(t),ce=t=>H.parse(t),pe=t=>Y.parse(t),me=t=>W.parse(t),de=t=>X.parse(t),ue=t=>J.parse(t),le=t=>Q.parse(t),ye=t=>Z.parse(t),ge=t=>ee.parse(t),fe=t=>te.parse(t),xe=t=>ne.parse(t),Ie=t=>O.parse(t),he=t=>w.parse(t),Ce=t=>A.parse(t),Pe=t=>ae.parse(t),Re=t=>re.parse(t),Fe={originatorName:$.optional(),originatorAccount:G.optional(),originatorBankRoutingCode:K.optional(),recipientName:H.optional(),recipientAccount:Y.optional(),recipientBankRoutingCode:W.optional(),reference:X.optional(),traceNumber:J.optional(),externalId:Q.optional(),clientId:Z.optional(),dateFormat:ee.optional(),locale:te.optional(),originatedBy:ne.optional(),paymentRail:C.optional(),paymentType:P.optional(),fromValueDate:O.optional(),toValueDate:O.optional(),fromExecuteDate:w.optional(),toExecuteDate:w.optional(),status:h.optional(),fromReturnDate:A.optional(),toReturnDate:A.optional(),isSettlement:ae.optional(),orderBy:re.optional(),sortOrder:T.optional(),limit:e.number().positive().optional().describe("Maximum number of records to return. Defaults to 20 if not specified. Set to 0 to return all records."),offset:e.number().min(0).optional()},Xe=e.object(Fe).partial();var Ue={id:e.number(),clientId:e.number(),amount:e.number().positive(),correlationId:e.string(),paymentType:P,paymentRail:C,recipient:e.object({cardId:e.string().optional(),recipientType:e.string(),address:e.object({line1:e.string().optional(),line2:e.string().optional(),stateCode:e.string().optional(),countryCode:e.string(),postalCode:e.string().optional()}),name:e.string()}),originator:e.object({accountId:e.string().optional(),recipientType:e.string(),address:e.object({line1:e.string().optional(),line2:e.string().optional(),stateCode:e.string().optional(),countryCode:e.string(),postalCode:e.string().optional()}),name:e.string()}),executedAt:e.string(),createdAt:e.string(),externalId:e.string(),status:h,paymentRailMetaData:e.record(e.string(),e.any()).optional(),currencyData:e.object({code:e.string(),name:e.string(),decimalPlaces:e.number(),displaySymbol:e.string(),nameCode:e.string(),currencyCodeInDigit:e.number(),isBaseCurrency:e.boolean()}),currency:e.string().min(3).max(3)},Se=e.object(Ue).catchall(e.any()),be=e.object({streetAddress:e.string().optional(),city:e.string().optional(),state:e.string().optional(),country:e.string().optional(),postalCode:e.string().optional()}).optional(),ke=e.object({name:e.string().optional(),identifier:e.string().optional(),address:be}).optional(),v=e.object({name:e.string(),identifier:e.string(),accountType:e.enum(["CHECKING","SAVINGS"]).optional(),address:be,agent:ke}),Le={amount:e.number().positive(),currency:e.string().min(3).max(3),paymentRail:C,paymentType:P,debtor:v,creditor:v,clientId:e.string().optional(),correspondent:v.optional(),exchangeRate:e.number().positive().optional(),externalId:e.string().optional(),reference:e.union([e.string(),e.array(e.string())]).optional(),paymentRailMetaData:e.record(e.string(),e.any()).optional(),chargeBearer:e.enum(["OUR","BEN","SHA"]).optional(),purposeCode:e.string().optional(),valueDate:e.string().optional(),executionDate:e.string().optional()},_e=e.object(Le).catchall(e.any()).refine(t=>(t.paymentRail==="WIRE"||t.paymentRail==="SWIFT")&&t.creditor?t.creditor.address&&t.creditor.address.state&&t.creditor.address.country:!0,{message:"For WIRE transfers, recipient address with state and country is mandatory"}),ze={amount:e.number().positive().optional(),correspondent:e.object({name:e.string().optional(),identifier:e.string().optional(),accountType:e.string().optional()}).optional(),creditor:e.object({name:e.string().optional(),identifier:e.string().optional(),accountType:e.string().optional(),agent:e.object({name:e.string().optional(),identifier:e.string().optional()}).optional()}).optional(),debtor:e.object({name:e.string().optional(),identifier:e.string().optional(),accountType:e.string().optional(),agent:e.object({name:e.string().optional(),identifier:e.string().optional()}).optional()}).optional(),exchangeRate:e.number().positive().optional(),externalId:e.string().optional(),errorCode:e.string().optional(),errorMessage:e.string().optional(),reference:e.union([e.string(),e.array(e.string())]).optional(),paymentRailMetaData:e.record(e.string(),e.any()).optional(),status:h.optional()},Ve=e.object(ze).catchall(e.any()),Je=e.object({totalFilteredRecords:e.number(),pageItems:e.array(Se)}),S=t=>Se.parse(t),De=t=>_e.parse(t),Ee=t=>Ve.parse(t);var Qe=e.object({id:e.string(),clientId:e.number(),resourceId:e.number(),resourceIdentifier:e.string()});import{ZodError as b}from"zod";var je=t=>{try{z(t)}catch(n){throw n instanceof b?g({message:`Invalid filter key: '${t}'. ${n.message}`,code:"invalid_filter_key"}):n}},qe=(t,n)=>{try{switch(t){case"status":V(n);break;case"paymentRail":j(n);break;case"paymentType":q(n);break;case"sortOrder":M(n);break;case"originatorName":oe(n);break;case"originatorAccount":ie(n);break;case"originatorBankRoutingCode":se(n);break;case"recipientName":ce(n);break;case"recipientAccount":pe(n);break;case"recipientBankRoutingCode":me(n);break;case"reference":de(n);break;case"traceNumber":ue(n);break;case"externalId":le(n);break;case"clientId":ye(n);break;case"dateFormat":ge(n);break;case"locale":fe(n);break;case"originatedBy":xe(n);break;case"fromValueDate":case"toValueDate":Ie(n);break;case"fromExecuteDate":case"toExecuteDate":he(n);break;case"fromReturnDate":case"toReturnDate":Ce(n);break;case"isSettlement":Pe(n);break;case"orderBy":Re(n);break;default:break}}catch(i){throw i instanceof b?g({message:`Invalid value for '${t}': '${n}'. ${i.message}`,code:`invalid_${t}_value`}):i}},ve=t=>({input:t,metadata:{commandName:"CreatePayment",path:"/v1/payments",method:"POST"},execute:async n=>{try{De(t.payment)}catch(a){throw a instanceof b?g({message:`Invalid payment data: ${a.message}`,code:"invalid_payment_input"}):a}t.tenantId&&(n.tenantId=t.tenantId);let i=await x(n);try{let a=await i.post("/v1/payments",t.payment);return S(a.data)}catch(a){f(a)}}}),Oe=t=>({input:t,metadata:{commandName:"GetPayment",path:`/v1/payments/${t.id}`,method:"GET"},execute:async n=>{t.tenantId&&(n.tenantId=t.tenantId);let i=await x(n);try{let a=await i.get(`/v1/payments/${t.id}`);return S(a.data)}catch(a){f(a)}}}),we=t=>({input:t,metadata:{commandName:"UpdatePayment",path:`/v1/payments/${t.id}`,method:"PUT"},execute:async n=>{try{Ee(t.payment)}catch(a){throw a instanceof b?g({message:`Invalid payment update data: ${a.message}`,code:"invalid_payment_update_input"}):a}t.tenantId&&(n.tenantId=t.tenantId);let i=await x(n);try{let a=await i.put(`/v1/payments/${t.id}`,t.payment);return S(a.data)}catch(a){f(a)}}}),R=(t,n,i,a)=>{if(n!==void 0&&n!==0&&n<=0)throw g({message:`Invalid limit: ${n}. Limit must be positive or 0 for fetching all records.`,code:"invalid_limit"});if(i!==void 0&&i<0)throw g({message:`Invalid offset: ${i}. Offset must be non-negative.`,code:"invalid_offset"});return{where:l=>(je(l),{eq:c=>(qe(l,c),R({...t,[l]:c},n,i,a))}),limit:l=>R(t,l,i,a),offset:l=>R(t,n,l,a),all:()=>R(t,0,i,a),execute:()=>{let l={locale:"en",originatedBy:"us",orderBy:"id",sortOrder:"DESC"},c={...l,...t,limit:n||200,offset:i||0};return{input:{filters:t,limit:n,offset:i,tenantId:a},metadata:{commandName:"ListPayments",path:"/v1/payments",method:"GET"},execute:async s=>{a&&(s.tenantId=a);let o=await x(s);try{if(n===0){let r=[],d=i||0,m=0;do{let y={...l,...t,limit:200,offset:d},D=await o.get("/v1/payments",{params:y}),{totalFilteredRecords:Ne,pageItems:Be}=D.data;r.push(...Be),m=Ne,d+=200}while(d<m);return{totalFilteredRecords:m,pageItems:r}}else return(await o.get("/v1/payments",{params:c})).data}catch(r){f(r)}}}}}},Ae=t=>({list:()=>R({},void 0,void 0,t?.tenantId)}),rt=(t,n)=>({input:{params:t,configuration:n},metadata:{commandName:"GetPayments",path:"/v1/payments",method:"GET"},execute:async i=>{n.tenantId&&(i.tenantId=n.tenantId);let a=await x(i),u=[],I=t.limit||20,l=t.offset||0,c=0,r={...{locale:"en",originatedBy:"us",orderBy:"id",sortOrder:"DESC"},...(p=>{let m=["fromValueDate","toValueDate","fromExecuteDate","toExecuteDate","fromReturnDate","toReturnDate"].some(D=>p[D]!==void 0),y={...p};return m&&y.dateFormat===void 0&&(y.dateFormat="yyyy-MM-dd"),y})(t),limit:I,offset:l};try{if(t.limit===0){do{let p=await a.get("/v1/payments",{params:r}),{totalFilteredRecords:d,pageItems:m}=p.data;u.push(...m),c=d,l+=I}while(l<c);return{totalFilteredRecords:c,pageItems:u}}else return(await a.get("/v1/payments",{params:r})).data}catch(p){f(p)}}}),Te=t=>({input:t,metadata:{commandName:"DeletePayment",path:`/v1/payments/${t.id}`,method:"DELETE"},execute:async n=>{t.tenantId&&(n.tenantId=t.tenantId);let i=await x(n);try{await i.delete(`/v1/payments/${t.id}`)}catch(a){f(a)}}});var mt=t=>{let n=E(t);if(n.length>0)throw g({message:`Invalid configuration: ${n.join(", ")}`,code:"invalid_config"});let i=async(c,s,o)=>{if(t.middlewares)for(let r of t.middlewares)c==="before"&&r.before?await r.before(s):c==="after"&&r.after?await r.after(s,o):c==="onError"&&r.onError&&await r.onError(s,o)},a={...t},u=async c=>{try{await i("before",c);let s=await c.execute(a);return await i("after",c,s),s}catch(s){throw await i("onError",c,s),s}},I=c=>{let s=c||a.tenantId;return{payment:{create:o=>{let r=ve({payment:o,tenantId:s});return{execute:async()=>u(r)}},get:o=>{let r=Oe({id:o,tenantId:s});return{execute:async()=>u(r)}},update:(o,r)=>{let p=we({id:o,payment:r,tenantId:s});return{execute:async()=>u(p)}},delete:o=>{let r=Te({id:o,tenantId:s});return{execute:async()=>u(r)}},list:()=>{let r=Ae({tenantId:s}).list(),p=d=>({where:d.where,limit:m=>{let y=d.limit(m);return p(y)},offset:m=>{let y=d.offset(m);return p(y)},all:()=>{let m=d.all();return p(m)},execute:async()=>{let m=d.execute();return u(m)}});return p(r)}},client:{create:o=>{let r=U({clientData:o,tenantId:s});return{execute:async()=>u(r)}},get:o=>{let r=N({clientId:o,tenantId:s});return{execute:async()=>u(r)}},update:(o,r)=>{let p=B({clientId:o,updates:r,tenantId:s});return{execute:async()=>u(p)}},updateDocumentRecord:(o,r)=>{let p=F({clientId:o,identifierId:r.id,updates:r,tenantId:s});return{execute:async()=>u(p)}},delete:o=>{let r=L({clientId:o,tenantId:s});return{execute:async()=>u(r)}},list:()=>{let r=k({tenantId:s}).list(),p=d=>({where:d.where,limit:m=>{let y=d.limit(m);return p(y)},offset:m=>{let y=d.offset(m);return p(y)},all:()=>{let m=d.all();return p(m)},execute:async()=>{let m=d.execute();return u(m)}});return p(r)}}}};return{setConfig:c=>{a=c},updateConfig:c=>{let s={...a,...c,axiosConfig:{...a.axiosConfig,...c.axiosConfig,headers:{...a.axiosConfig?.headers,...c.axiosConfig?.headers}}},o=E(s);if(o.length>0)throw g({message:`Invalid configuration: ${o.join(", ")}`,code:"invalid_config"});a=s},resetConfig:()=>{a=t},request:u,tenant:c=>I(c),...I()}};export{_ as a,h as b,C as c,P as d,T as e,Fe as f,Xe as g,Ue as h,Le as i,_e as j,ze as k,Ve as l,Je as m,ve as n,Oe as o,we as p,rt as q,mt as r};
