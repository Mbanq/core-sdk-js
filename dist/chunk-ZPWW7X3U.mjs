import Je from"axios";var u=({message:e,statusCode:o,code:r,requestId:i,originalError:m})=>({name:"CommandError",message:e,statusCode:o,code:r,requestId:i,originalError:m}),Gt=e=>typeof e=="object"&&e!==null&&"name"in e&&e.name==="CommandError",Xe=e=>{if(!e||typeof e!="object")return e;let o={...e};if(o.config&&typeof o.config=="object"){let r=o.config;if(r.httpsAgent&&typeof r.httpsAgent=="object"){let i=r.httpsAgent;delete i.sockets,delete i.freeSockets,delete i._sessionCache}}return o},p=e=>{if(Je.isAxiosError(e)){let o=e.response?.data?.message,r=e.response?.status?`Request failed with status code ${e.response.status}`:e.message||"Request failed";throw u({message:o||r,statusCode:e.response?.status,code:e.code,requestId:e.response?.headers?.["x-request-id"],originalError:Xe(e)})}throw e};import{z as a}from"zod";var q=a.enum(["originatorName","originatorAccount","originatorBankRoutingCode","recipientName","recipientAccount","recipientBankRoutingCode","reference","traceNumber","externalId","clientId","dateFormat","locale","originatedBy","paymentRail","paymentType","fromValueDate","toValueDate","fromExecuteDate","toExecuteDate","status","fromReturnDate","toReturnDate","isSettlement","orderBy","sortOrder"]),S=a.enum(["DRAFT","AML_SCREENING","AML_REJECTED","EXECUTION_SCHEDULED","EXECUTION_PROCESSING","EXECUTION_SUCCESS","EXECUTION_FAILURE","RETURNED","CANCELLED","COMPLIANCE_FAILURE","DELETED","UNKNOWN"]),R=a.enum(["ACH","SAMEDAYACH","WIRE","SWIFT","INTERNAL","FXPAY","CARD"]),v=a.enum(["CREDIT","DEBIT"]),N=a.enum(["ASC","DESC"]),Ht=q.options,Yt=S.options,Jt=R.options,Xt=v.options,Qt=N.options,j=e=>q.parse(e),z=e=>S.parse(e),$=e=>R.parse(e),_=e=>v.parse(e),M=e=>N.parse(e),V=a.string().min(1),G=a.string().min(1),K=a.string().min(1),W=a.string().min(1),H=a.string().min(1),Y=a.string().min(1),J=a.string().min(1),X=a.string().min(1),Q=a.string().min(1),Z=a.union([a.string(),a.number()]),ee=a.string(),te=a.string(),ne=a.string(),T=a.string(),k=a.string(),L=a.string(),ae=a.boolean(),oe=a.string(),re=e=>V.parse(e),ie=e=>G.parse(e),se=e=>K.parse(e),ce=e=>W.parse(e),le=e=>H.parse(e),pe=e=>Y.parse(e),de=e=>J.parse(e),me=e=>X.parse(e),ue=e=>Q.parse(e),ye=e=>Z.parse(e),ge=e=>ee.parse(e),fe=e=>te.parse(e),be=e=>ne.parse(e),Ce=e=>T.parse(e),he=e=>k.parse(e),Ie=e=>L.parse(e),xe=e=>ae.parse(e),Se=e=>oe.parse(e),Qe={originatorName:V.optional(),originatorAccount:G.optional(),originatorBankRoutingCode:K.optional(),recipientName:W.optional(),recipientAccount:H.optional(),recipientBankRoutingCode:Y.optional(),reference:J.optional(),traceNumber:X.optional(),externalId:Q.optional(),clientId:Z.optional(),dateFormat:ee.optional(),locale:te.optional(),originatedBy:ne.optional(),paymentRail:R.optional(),paymentType:v.optional(),fromValueDate:T.optional(),toValueDate:T.optional(),fromExecuteDate:k.optional(),toExecuteDate:k.optional(),status:S.optional(),fromReturnDate:L.optional(),toReturnDate:L.optional(),isSettlement:ae.optional(),orderBy:oe.optional(),sortOrder:N.optional(),limit:a.number().min(0).optional().describe("Maximum number of records to return. Defaults to 20 if not specified. Set to 0 to return all records."),offset:a.number().min(0).optional()},Zt=a.object(Qe).partial();var Ze={id:a.number(),clientId:a.number(),amount:a.number().positive(),correlationId:a.string(),paymentType:v,paymentRail:R,recipient:a.object({cardId:a.string().optional(),recipientType:a.string(),address:a.object({line1:a.string().optional(),line2:a.string().optional(),stateCode:a.string().optional(),countryCode:a.string(),postalCode:a.string().optional()}),name:a.string()}),originator:a.object({accountId:a.string().optional(),recipientType:a.string(),address:a.object({line1:a.string().optional(),line2:a.string().optional(),stateCode:a.string().optional(),countryCode:a.string(),postalCode:a.string().optional()}),name:a.string()}),executedAt:a.string(),createdAt:a.string(),externalId:a.string(),status:S,paymentRailMetaData:a.record(a.string(),a.any()).optional(),currencyData:a.object({code:a.string(),name:a.string(),decimalPlaces:a.number(),displaySymbol:a.string(),nameCode:a.string(),currencyCodeInDigit:a.number(),isBaseCurrency:a.boolean()}),currency:a.string().min(3).max(3)},Re=a.object(Ze).catchall(a.any()),ve=a.object({streetAddress:a.string().optional(),city:a.string().optional(),state:a.string().optional(),country:a.string().optional(),postalCode:a.string().optional()}).optional(),et=a.object({name:a.string().optional(),identifier:a.string().optional(),address:ve}).optional(),w=a.object({name:a.string(),identifier:a.string(),accountType:a.enum(["CHECKING","SAVINGS"]).optional(),address:ve,agent:et}),tt={amount:a.number().positive(),currency:a.string().min(3).max(3),paymentRail:R,paymentType:v,debtor:w,creditor:w,clientId:a.string().optional(),correspondent:w.optional(),exchangeRate:a.number().positive().optional(),externalId:a.string().optional(),reference:a.union([a.string(),a.array(a.string())]).optional(),paymentRailMetaData:a.record(a.string(),a.any()).optional(),chargeBearer:a.enum(["OUR","BEN","SHA"]).optional(),purposeCode:a.string().optional(),valueDate:a.string().optional(),executionDate:a.string().optional()},nt=a.object(tt).catchall(a.any()).refine(e=>(e.paymentRail==="WIRE"||e.paymentRail==="SWIFT")&&e.creditor?e.creditor.address&&e.creditor.address.state&&e.creditor.address.country:!0,{message:"For WIRE transfers, recipient address with state and country is mandatory"}),at={amount:a.number().positive().optional(),correspondent:a.object({name:a.string().optional(),identifier:a.string().optional(),accountType:a.string().optional()}).optional(),creditor:a.object({name:a.string().optional(),identifier:a.string().optional(),accountType:a.string().optional(),agent:a.object({name:a.string().optional(),identifier:a.string().optional()}).optional()}).optional(),debtor:a.object({name:a.string().optional(),identifier:a.string().optional(),accountType:a.string().optional(),agent:a.object({name:a.string().optional(),identifier:a.string().optional()}).optional()}).optional(),exchangeRate:a.number().positive().optional(),externalId:a.string().optional(),errorCode:a.string().optional(),errorMessage:a.string().optional(),reference:a.union([a.string(),a.array(a.string())]).optional(),paymentRailMetaData:a.record(a.string(),a.any()).optional(),status:S.optional()},ot=a.object(at).catchall(a.any()),en=a.object({totalFilteredRecords:a.number(),pageItems:a.array(Re)}),P=e=>Re.parse(e),De=e=>nt.parse(e),Ae=e=>ot.parse(e);var tn=a.object({id:a.string(),clientId:a.number(),resourceId:a.number(),resourceIdentifier:a.string()});import st from"axios";import{v4 as ct}from"uuid";import*as we from"https";import rt from"axios";import it from"jsonwebtoken";var Pe=(e,o)=>{if(!e)throw u({message:"Missing JWT secret",code:"missing_jwt_secret"});return it.sign({signee:o},e,{algorithm:"HS512",expiresIn:"1d"})||""},Oe=async(e,o,r,i)=>{let m={method:"POST",url:`${o}/oauth/token`,headers:{"Content-Type":"application/x-www-form-urlencoded",tenantId:r},data:i},{data:{access_token:l}}=await rt.request(m);return e=l,e};var Ee={token:""},lt=e=>e&&(e.startsWith("Bearer ")?e:`Bearer ${e}`),d=async e=>{let r=st.create({timeout:e.axiosConfig?.timeout||29e3,baseURL:e.baseUrl,headers:{"Content-Type":"application/json; charset=utf-8","JWT-Token":e?.secret?`${Pe(e?.secret,e?.signee||"")}`:void 0,Authorization:e.bearerToken!==void 0?lt(e.bearerToken):e.credential?`Bearer ${Ee.token||await Oe(Ee.token,e.baseUrl,e.tenantId,e.credential)}`:void 0,"trace-id":e.traceId||`RequestUUID=${ct()}`,tenantId:e.tenantId},httpsAgent:new we.Agent({rejectUnauthorized:!0,keepAlive:e.axiosConfig?.keepAlive})});return e.logger&&e.logger(r),r};import{ZodError as O}from"zod";var pt=e=>{try{j(e)}catch(o){throw o instanceof O?u({message:`Invalid filter key: '${e}'. ${o.message}`,code:"invalid_filter_key"}):o}},dt=(e,o)=>{try{switch(e){case"status":z(o);break;case"paymentRail":$(o);break;case"paymentType":_(o);break;case"sortOrder":M(o);break;case"originatorName":re(o);break;case"originatorAccount":ie(o);break;case"originatorBankRoutingCode":se(o);break;case"recipientName":ce(o);break;case"recipientAccount":le(o);break;case"recipientBankRoutingCode":pe(o);break;case"reference":de(o);break;case"traceNumber":me(o);break;case"externalId":ue(o);break;case"clientId":ye(o);break;case"dateFormat":ge(o);break;case"locale":fe(o);break;case"originatedBy":be(o);break;case"fromValueDate":case"toValueDate":Ce(o);break;case"fromExecuteDate":case"toExecuteDate":he(o);break;case"fromReturnDate":case"toReturnDate":Ie(o);break;case"isSettlement":xe(o);break;case"orderBy":Se(o);break;default:break}}catch(r){throw r instanceof O?u({message:`Invalid value for '${e}': '${o}'. ${r.message}`,code:`invalid_${e}_value`}):r}},bn=e=>({input:e,metadata:{commandName:"CreatePayment",path:"/v1/payments",method:"POST"},execute:async o=>{try{De(e.payment)}catch(i){throw i instanceof O?u({message:`Invalid payment data: ${i.message}`,code:"invalid_payment_input"}):i}e.tenantId&&(o.tenantId=e.tenantId);let r=await d(o);try{let i=await r.post("/v1/payments",e.payment);return P(i.data)}catch(i){p(i)}}}),Cn=e=>({input:e,metadata:{commandName:"GetPayment",path:`/v1/payments/${e.id}`,method:"GET"},execute:async o=>{e.tenantId&&(o.tenantId=e.tenantId);let r=await d(o);try{let i=await r.get(`/v1/payments/${e.id}`);return P(i.data)}catch(i){p(i)}}}),hn=e=>({input:e,metadata:{commandName:"UpdatePayment",path:`/v1/payments/${e.id}`,method:"PUT"},execute:async o=>{try{Ae(e.payment)}catch(i){throw i instanceof O?u({message:`Invalid payment update data: ${i.message}`,code:"invalid_payment_update_input"}):i}e.tenantId&&(o.tenantId=e.tenantId);let r=await d(o);try{let i=await r.put(`/v1/payments/${e.id}`,e.payment);return P(i.data)}catch(i){p(i)}}}),D=(e,o,r,i)=>{if(o!==void 0&&o!==0&&o<=0)throw u({message:`Invalid limit: ${o}. Limit must be positive or 0 for fetching all records.`,code:"invalid_limit"});if(r!==void 0&&r<0)throw u({message:`Invalid offset: ${r}. Offset must be non-negative.`,code:"invalid_offset"});return{where:s=>(pt(s),{eq:c=>(dt(s,c),D({...e,[s]:c},o,r,i))}),limit:s=>D(e,s,r,i),offset:s=>D(e,o,s,i),all:()=>D(e,0,r,i),execute:()=>{let s={locale:"en",originatedBy:"us",orderBy:"id",sortOrder:"DESC"},c={...s,...e,limit:o||200,offset:r||0};return{input:{filters:e,limit:o,offset:r,tenantId:i},metadata:{commandName:"ListPayments",path:"/v1/payments",method:"GET"},execute:async y=>{i&&(y.tenantId=i);let g=await d(y);try{if(o===0){let b=[],C=r||0,h=0;do{let I={...s,...e,limit:200,offset:C},x=await g.get("/v1/payments",{params:I}),{totalFilteredRecords:E,pageItems:Ye}=x.data;b.push(...Ye),h=E,C+=200}while(C<h);return{totalFilteredRecords:h,pageItems:b}}else return(await g.get("/v1/payments",{params:c})).data}catch(b){p(b)}}}}}},In=e=>({list:()=>D({},void 0,void 0,e?.tenantId)}),xn=(e,o)=>({input:{params:e,configuration:o},metadata:{commandName:"GetPayments",path:"/v1/payments",method:"GET"},execute:async r=>{o.tenantId&&(r.tenantId=o.tenantId);let i=await d(r),m=[],l=e.limit||20,s=e.offset||0,c=0,b={...{locale:"en",originatedBy:"us",orderBy:"id",sortOrder:"DESC"},...(f=>{let h=["fromValueDate","toValueDate","fromExecuteDate","toExecuteDate","fromReturnDate","toReturnDate"].some(x=>f[x]!==void 0),I={...f};return h&&I.dateFormat===void 0&&(I.dateFormat="yyyy-MM-dd"),I})(e),limit:l,offset:s};try{if(e.limit===0){do{let f=await i.get("/v1/payments",{params:b}),{totalFilteredRecords:C,pageItems:h}=f.data;m.push(...h),c=C,s+=l}while(s<c);return{totalFilteredRecords:c,pageItems:m}}else return(await i.get("/v1/payments",{params:b})).data}catch(f){p(f)}}}),Sn=e=>({input:e,metadata:{commandName:"DeletePayment",path:`/v1/payments/${e.id}`,method:"DELETE"},execute:async o=>{e.tenantId&&(o.tenantId=e.tenantId);let r=await d(o);try{await r.delete(`/v1/payments/${e.id}`)}catch(i){p(i)}}});import t from"zod";var Te=t.object({id:t.number(),code:t.string(),value:t.string()}),ke=t.object({id:t.number(),code:t.string(),value:t.string()}),Le=t.object({active:t.boolean(),mandatory:t.boolean(),systemDefined:t.boolean()}),Ne=t.object({id:t.number()}),Fe=t.object({id:t.number(),name:t.string().optional()}),Be=t.object({active:t.boolean()}),Ue=t.object({submittedOnDate:t.array(t.number()),submittedByUsername:t.string().optional(),submittedByFirstname:t.string().optional(),submittedByLastname:t.string().optional(),activatedOnDate:t.array(t.number()).optional(),activatedByUsername:t.string().optional(),activatedByFirstname:t.string().optional(),activatedByLastname:t.string().optional()}),mt=t.object({}).catchall(t.any()),ut=t.object({}).catchall(t.any()),yt=t.object({}).catchall(t.any()),qe=t.object({constitution:mt,mainBusinessLine:ut,countryOfIncorporation:yt}).catchall(t.any()),je=t.object({isExternalCardDebitDisable:t.boolean(),isExternalCardCreditDisable:t.boolean(),isAchDebitOutgoingDisable:t.boolean(),isAchCreditOutgoingDisable:t.boolean(),isAchDebitIncomingDisable:t.boolean(),isAchCreditIncomingDisable:t.boolean(),isInternalCreditDisable:t.boolean(),isInternalDebitDisable:t.boolean(),isWireCreditOutgoingDisable:t.boolean(),isWireCreditIncomingDisable:t.boolean(),isSwiftCreditOutgoingDisable:t.boolean(),isSwiftCreditIncomingDisable:t.boolean(),isFxpayCreditOutgoingDisable:t.boolean(),isAllocateToSubAccountDisable:t.boolean(),isInternalCreditOwnDisable:t.boolean(),type:t.string(),resourceId:t.number(),id:t.number()}).catchall(t.any()),ze=t.object({}).catchall(t.any()),$e=t.object({id:t.number(),accountNo:t.string(),status:ke,subStatus:Le,active:t.boolean(),activationDate:t.array(t.number()).optional(),firstname:t.string(),lastname:t.string(),displayName:t.string(),mobileNo:t.string(),emailAddress:t.string(),dateOfBirth:t.array(t.number()),gender:Ne,clientTypes:t.array(t.any()),clientClassification:Fe,occupation:Be,isStaff:t.boolean(),skipAvs:t.boolean(),officeId:t.number(),officeName:t.string(),imageId:t.string().optional(),imagePresent:t.boolean().optional(),timeline:Ue,legalForm:Te,clientVerificationStatus:t.string(),updatedAt:t.string(),isBlockExternalCardsAddition:t.boolean(),clientNonPersonDetails:qe,clientTransferOptionData:je,authorizations:t.array(t.number()).optional(),mobileCountryCode:t.string(),clientKycStatus:ze,ofLoanCycle:t.number(),ofLoanActive:t.number(),activeDepositAccount:t.number(),onBoardingStatus:t.string().optional()}).catchall(t.any()),gt=t.object({riskScore:t.number(),rating:t.string()}).catchall(t.any()),ft=t.object({street:t.string(),city:t.string(),state:t.string(),zipCode:t.string()}).catchall(t.any()),bt=t.object({type:t.string(),value:t.string()}).catchall(t.any()),Ct={firstname:t.string(),middlename:t.string().optional(),lastname:t.string(),fullname:t.string().optional(),dob:t.string(),genderId:t.number(),locale:t.string(),officeId:t.number(),mobileCountryCode:t.string(),mobileNo:t.string(),emailAddress:t.string().email(),legalFormId:t.number(),externalId:t.string().optional(),isOptedForMLALStatus:t.boolean().optional(),currentMLALStatus:t.string().optional(),isStaff:t.boolean().optional(),staffId:t.number().optional(),clientClassificationId:t.number().optional(),savingsProductId:t.number().optional(),active:t.boolean().optional(),dateFormat:t.string(),activationDate:t.string().optional(),submittedOnDate:t.string(),dateOfBirth:t.string()},An=t.object(Ct).catchall(t.any()),ht={clientId:t.number(),status:t.string()},Pn=t.object(ht).catchall(t.any()),It={firstname:t.string().optional(),middlename:t.string().optional(),fullname:t.string().optional(),genderId:t.number().optional(),lastname:t.string().optional(),occupationId:t.number().optional(),mobileCountryCode:t.string().optional(),mobileNo:t.string().optional(),emailAddress:t.string().email().optional(),externalId:t.string().optional(),clientClassificationId:t.number().optional(),dateOfBirth:t.string().optional(),dateFormat:t.string().optional()},On=t.object(It).catchall(t.any()),xt={documentTypeId:t.string(),documentKey:t.string(),status:t.string(),description:t.string().optional(),issuedBy:t.string().optional(),locale:t.string().optional(),dateFormat:t.string().optional(),expiryDate:t.string().optional(),nationality:t.number().optional(),issuedDate:t.string().optional()},En=t.object(xt).catchall(t.any()),St={id:t.number(),officeId:t.number(),clientId:t.number(),resourceId:t.number(),changes:t.record(t.string(),t.any()),isScheduledTransfer:t.boolean(),isSkipNotification:t.boolean()},wn=t.object(St).catchall(t.any()),Rt={developerMessage:t.string(),defaultUserMessage:t.string(),userMessageGlobalisationCode:t.string(),parameterName:t.string().optional(),value:t.any().nullable(),args:t.array(t.object({value:t.any()})).optional()},vt=t.object(Rt),Dt={developerMessage:t.string(),httpStatusCode:t.string(),defaultUserMessage:t.string(),userMessageGlobalisationCode:t.string(),errors:t.array(vt).optional()},Tn=t.object(Dt).catchall(t.any()),At={tenantId:t.string().optional(),offset:t.number().optional(),limit:t.number().optional(),orderBy:t.string().optional(),sortOrder:t.string().optional(),officeId:t.number().optional(),displayName:t.string().optional(),firstname:t.string().optional(),lastname:t.string().optional(),externalId:t.string().optional(),orphansOnly:t.boolean().optional(),clientStatus:t.string().optional(),mobileNo:t.string().optional(),createdStartDate:t.string().optional(),creationEndDate:t.string().optional(),activatedStartDate:t.string().optional(),activatedEndDate:t.string().optional(),closedStartDate:t.string().optional(),closedEndDate:t.string().optional()},kn=t.object(At),Ln={id:t.number(),accountNo:t.string(),status:ke,subStatus:Le,active:t.boolean(),activationDate:t.array(t.number()).optional(),firstname:t.string(),lastname:t.string(),displayName:t.string(),mobileNo:t.string(),emailAddress:t.string(),dateOfBirth:t.array(t.number()),gender:Ne,clientTypes:t.array(t.any()),clientClassification:Fe,occupation:Be,isStaff:t.boolean(),skipAvs:t.boolean(),officeId:t.number(),officeName:t.string(),imageId:t.string().optional(),imagePresent:t.boolean().optional(),timeline:Ue,legalForm:Te,clientVerificationStatus:t.string(),updatedAt:t.string(),isBlockExternalCardsAddition:t.boolean(),clientNonPersonDetails:qe,clientTransferOptionData:je,authorizations:t.array(t.number()).optional(),mobileCountryCode:t.string(),clientKycStatus:ze,ofLoanCycle:t.number(),ofLoanActive:t.number(),activeDepositAccount:t.number(),onBoardingStatus:t.string().optional()},Pt={totalFilteredRecords:t.number(),pageItems:t.array($e)},Nn=t.object(Pt).catchall(t.any()),Ot={clientData:$e.optional(),riskRatingData:gt.optional(),clientAddressData:ft.optional(),clientIdentifierData:bt.optional()},Fn=t.object(Ot);var Et=t.enum(["offset","limit","orderBy","sortOrder","officeId","displayName","firstname","lastname","externalId","orphansOnly","clientStatus","mobileNo","createdStartDate","creationEndDate","activatedStartDate","activatedEndDate","closedStartDate","closedEndDate"]),wt=t.enum(["displayName","accountNo","officeId","officeName"]),Tt=t.enum(["ASC","DESC"]),kt=t.enum(["ACTIVE","PENDING","INACTIVE"]),F=e=>Et.parse(e),Lt=e=>wt.parse(e),Nt=e=>Tt.parse(e),Ft=e=>kt.parse(e),_e=e=>{try{for(let[o,r]of Object.entries(e))if(F(o),r!=null)switch(o){case"orderBy":Lt(r);break;case"sortOrder":Nt(r);break;case"clientStatus":Ft(r);break;case"offset":case"limit":case"officeId":t.number().min(0).parse(r);break;case"orphansOnly":t.boolean().parse(r);break;case"displayName":case"firstname":case"lastname":case"externalId":case"mobileNo":case"createdStartDate":case"creationEndDate":case"activatedStartDate":case"activatedEndDate":case"closedStartDate":case"closedEndDate":t.string().min(1).parse(r);break}}catch(o){throw o instanceof t.ZodError?u({message:`Validation error: ${o.errors.map(r=>r.message).join(", ")}`,code:"validation_error"}):o}};var Hn=e=>({input:e,metadata:{commandName:"GetClient",path:`/v1/clients/${e.clientId}`,method:"GET"},execute:async o=>{e.tenantId&&(o.tenantId=e.tenantId);let r=await d(o);try{let i={},m=new URLSearchParams;e.staffInSelectedOfficeOnly&&m.append("staffInSelectedOfficeOnly","true"),e.checkIdentitiesExpiration&&m.append("checkIdentitiesExpiration","true"),e.clientAccountAssociate&&m.append("clientAccountAssociate","true");let l=m.toString(),s=`/v1/clients/${e.clientId}${l?`?${l}`:""}`,c=await r.get(s);if(i.clientData=c,e.riskRating){let y=await r.get(`/v1/clients/${e.clientId}/riskrating`);i.riskRatingData=y}if(e.clientAddress){let y=await r.get(`/v1/client/${e.clientId}/addresses`);i.clientAddressData=y}if(e.clientIdentifier){let y=await r.get(`/v1/clients/${e.clientId}/identifiers?unmaskValue=true`);i.clientIdentifierData=y}return i}catch(i){p(i)}}}),Yn=e=>({input:e,metadata:{commandName:"UpdateClient",path:`/v1/clients/${e.clientId}`,method:"PUT"},execute:async o=>{e.tenantId&&(o.tenantId=e.tenantId);let r=await d(o);try{return(await r.put(`/v1/clients/${e.clientId}`,{...e.updates})).data}catch(i){p(i)}}}),Jn=e=>({input:e,metadata:{commandName:"UpdateClientIdentifier",path:`/v1/clients/${e.clientId}/identifiers/${e.identifierId}`,method:"PUT"},execute:async o=>{e.tenantId&&(o.tenantId=e.tenantId);let r=await d(o);try{return(await r.put(`/v1/clients/${e.clientId}/identifiers/${e.identifierId}`,{...e.updates})).data}catch(i){p(i)}}}),Xn=e=>({input:e,metadata:{commandName:"CreateClient",path:"/v1/clients",method:"POST"},execute:async o=>{e.tenantId&&(o.tenantId=e.tenantId);let r=await d(o);try{return(await r.post("/v1/clients",e.clientData)).data}catch(i){p(i)}}}),A=(e,o,r,i)=>{if(o!==void 0&&o!==0&&o<=0)throw u({message:`Invalid limit: ${o}. Limit must be positive or 0 for fetching all records.`,code:"invalid_limit"});if(r!==void 0&&r<0)throw u({message:`Invalid offset: ${r}. Offset must be non-negative.`,code:"invalid_offset"});return{where:s=>(F(s),{eq:c=>(_e({[s]:c}),A({...e,[s]:c},o,r,i))}),limit:s=>A(e,s,r,i),offset:s=>A(e,o,s,i),all:()=>A(e,0,r,i),execute:()=>{let s={...e,limit:o||200,offset:r||0};return{input:{filters:e,limit:o,offset:r,tenantId:i},metadata:{commandName:"ListClients",path:"/v1/clients",method:"GET"},execute:async c=>{i&&(c.tenantId=i);let y=await d(c);try{if(o===0){let g=[],f=r||0,C=0;do{let h={...e,limit:200,offset:f},I=await y.get("/v1/clients",{params:h}),{totalFilteredRecords:x,pageItems:E}=I.data;g.push(...E),C=x,f+=200}while(f<C);return{totalFilteredRecords:C,pageItems:g}}else return(await y.get("/v1/clients",{params:s})).data}catch(g){p(g)}}}}}},Qn=e=>({list:()=>A({},void 0,void 0,e?.tenantId)}),Zn=(e,o)=>({input:{params:e,configuration:o},metadata:{commandName:"GetClients",path:"/v1/clients",method:"GET"},execute:async r=>{o.tenantId&&(r.tenantId=o.tenantId);let i=await d(r),m=[],l=e.limit||200,s=e.offset||0,c=0,y={...e,limit:l,offset:s};try{if(e.limit===0){do{let g=await i.get("/v1/clients",{params:y}),{totalFilteredRecords:b,pageItems:f}=g.data;m.push(...f),c=b,s+=l}while(s<c);return{totalFilteredRecords:c,pageItems:m}}else return(await i.get("/v1/clients",{params:y})).data}catch(g){p(g)}}}),ea=e=>({input:e,metadata:{commandName:"DeleteClient",path:`/v1/clients/${e.clientId}`,method:"DELETE"},execute:async o=>{e.tenantId&&(o.tenantId=e.tenantId);let r=await d(o);try{return(await r.delete(`/v1/clients/${e.clientId}`)).data}catch(i){p(i)}}});import{z as n}from"zod";var Me=n.object({id:n.number(),code:n.string(),value:n.string(),submittedAndPendingApproval:n.boolean(),approved:n.boolean(),rejected:n.boolean(),withdrawnByApplicant:n.boolean(),active:n.boolean(),closed:n.boolean(),prematureClosed:n.boolean(),transferInProgress:n.boolean(),transferOnHold:n.boolean(),matured:n.boolean()}),B=n.object({code:n.string(),name:n.string(),decimalPlaces:n.number(),inMultiplesOf:n.number(),displaySymbol:n.string(),nameCode:n.string(),displayLabel:n.string(),currencyCodeInDigit:n.number().optional(),isBaseCurrency:n.boolean().optional()}),Bt=n.object({id:n.number(),code:n.string(),value:n.string()}),Ve=n.object({submittedOnDate:n.array(n.number()),submittedByUsername:n.string(),submittedByFirstname:n.string(),submittedByLastname:n.string(),approvedOnDate:n.array(n.number()).optional(),approvedByUsername:n.string().optional(),approvedByFirstname:n.string().optional(),approvedByLastname:n.string().optional(),activatedOnDate:n.array(n.number()).optional(),activatedByUsername:n.string().optional(),activatedByFirstname:n.string().optional(),activatedByLastname:n.string().optional()}),Ge=n.object({id:n.number(),code:n.string(),value:n.string(),none:n.boolean(),inactive:n.boolean(),dormant:n.boolean(),escheat:n.boolean(),block:n.boolean(),blockCredit:n.boolean(),blockDebit:n.boolean()}),Ke=n.object({id:n.number(),code:n.string(),value:n.string()}),Ut=n.object({id:n.number(),accountNo:n.string(),productId:n.number(),productName:n.string(),shortProductName:n.string(),status:Me,currency:B,accountBalance:n.number(),accountType:Bt,timeline:Ve,subStatus:Ge,lastActiveTransactionDate:n.array(n.number()).optional(),depositType:Ke,availableBalance:n.number(),allowPrepaidCard:n.boolean(),primaryAccount:n.record(n.any())}),qt={id:n.number(),accountNo:n.string(),depositType:Ke,clientId:n.number(),clientName:n.string(),savingsProductId:n.number(),savingsProductName:n.string(),fieldOfficerId:n.number(),status:Me,subStatus:Ge,timeline:Ve,currency:B,nominalAnnualInterestRate:n.number(),interestCompoundingPeriodType:n.object({id:n.number(),code:n.string(),value:n.string()}),interestPostingPeriodType:n.object({id:n.number(),code:n.string(),value:n.string()}),interestCalculationType:n.object({id:n.number(),code:n.string(),value:n.string()}),interestCalculationDaysInYearType:n.object({id:n.number(),code:n.string(),value:n.string()}),lockinPeriodFrequency:n.number(),lockinPeriodFrequencyType:n.object({id:n.number(),code:n.string(),value:n.string()}),withdrawalFeeForTransfers:n.boolean(),allowOverdraft:n.boolean(),enforceMinRequiredBalance:n.boolean(),onHoldFunds:n.number(),withHoldTax:n.boolean(),lastActiveTransactionDate:n.array(n.number()),isDormancyTrackingActive:n.boolean(),savingsAmountOnHold:n.number(),summary:n.object({currency:B,totalDeposits:n.number(),totalInterestEarned:n.number(),totalInterestPosted:n.number(),accountBalance:n.number(),totalOverdraftInterestDerived:n.number(),interestNotPosted:n.number(),lastInterestCalculationDate:n.array(n.number()),availableBalance:n.number()}),isLinkedToFloatingInterestRates:n.boolean(),interestRateDifferential:n.number(),overdraftInterestRateDifferential:n.number(),floatingRateId:n.number(),isBaseLendingRate:n.boolean(),isFloatingInterestRateCalculationAllowed:n.boolean(),bankDetails:n.object({routingNumber:n.string(),name:n.string(),swiftCode:n.string(),address:n.string(),city:n.string(),postcode:n.string()}),skipCollectTransferCharge:n.boolean(),cardRestricted:n.boolean(),overdraftLimit:n.number(),minRequiredBalance:n.number(),minBalanceForInterestCalculation:n.number(),minOverdraftForInterestCalculation:n.number(),overdraftMinimumDue:n.number(),currentFloatingInterestPeriod:n.object({fromDate:n.array(n.number()),interestRate:n.number(),isDifferentialToBLR:n.boolean()}),floatingRateName:n.string(),floatingRateDifferential:n.number(),parentAccount:n.object({withdrawalFeeForTransfers:n.boolean(),allowOverdraft:n.boolean(),enforceMinRequiredBalance:n.boolean(),withHoldTax:n.boolean(),isDormancyTrackingActive:n.boolean(),isLinkedToFloatingInterestRates:n.boolean(),isBaseLendingRate:n.boolean(),skipCollectTransferCharge:n.boolean(),cardRestricted:n.boolean(),allowPrepaidCard:n.boolean(),prepaidAccount:n.boolean()}),allowPrepaidCard:n.boolean(),prepaidAccount:n.boolean(),prepaidLimitAmount:n.number()},oa=n.object(qt),jt={savingsAccounts:n.array(Ut)},ra=n.object(jt),zt=n.enum(["showReservedAccount"]),$t={tenantId:n.string().optional(),showReservedAccount:n.boolean().optional().default(!1)},ia=n.object($t),U=e=>zt.parse(e),We=e=>{try{for(let[o,r]of Object.entries(e))if(U(o),r!=null)switch(o){case"showReservedAccount":n.boolean().parse(r);break}}catch(o){throw o instanceof n.ZodError?u({message:`Validation error: ${o.errors.map(r=>r.message).join(", ")}`,code:"validation_error"}):o}},_t={clientId:n.number(),productId:n.number(),submittedOnDate:n.string(),nominalAnnualInterestRate:n.string(),minRequiredOpeningBalance:n.string(),lockinPeriodFrequency:n.string(),withdrawalFeeForTransfers:n.boolean(),allowOverdraft:n.boolean(),overdraftLimit:n.number(),minOverdraftForInterestCalculation:n.number(),enforceMinRequiredBalance:n.boolean(),minRequiredBalance:n.number(),withHoldTax:n.boolean(),interestCompoundingPeriodType:n.number(),interestPostingPeriodType:n.number(),interestCalculationType:n.number(),interestCalculationDaysInYearType:n.number(),fieldOfficerId:n.number(),lockinPeriodFrequencyType:n.number(),locale:n.string(),dateFormat:n.string(),monthDayFormat:n.string(),charges:n.array(n.any())},sa=n.object(_t);var ga=e=>({input:e,metadata:{commandName:"GetAccount",path:`/v1/savingaccounts/${e.id}`,method:"GET"},execute:async o=>{e.tenantId&&(o.tenantId=e.tenantId);let r=await d(o);try{return(await r.get(`/v1/savingaccounts/${e.id}`)).data}catch(i){p(i)}}}),fa=e=>({input:e,metadata:{commandName:"UpdateAccount",path:`/v1/savingsaccounts/${e.accountId}`,method:"PUT"},execute:async o=>{e.tenantId&&(o.tenantId=e.tenantId);let r=await d(o);try{return(await r.put(`/v1/savingsaccounts/${e.accountId}`,{...e.updates,clientId:e.clientId})).data}catch(i){p(i)}}}),ba=e=>({input:e,metadata:{commandName:"DeleteAccount",path:`/v1/savingsaccounts/${e.accountId}`,method:"DELETE"},execute:async o=>{e.tenantId&&(o.tenantId=e.tenantId);let r=await d(o);try{return(await r.delete(`/v1/savingsaccounts/${e.accountId}`)).data}catch(i){p(i)}}}),He=(e,o,r)=>({where:l=>(U(l),{eq:s=>(We({[l]:s}),He({...e,[l]:s},o,r))}),execute:()=>({input:{filters:e,tenantId:r},metadata:{commandName:"ListAccountsOfClient",path:`/v1/clients/${o}/accounts`,method:"GET"},execute:async l=>{r&&(l.tenantId=r);let s=await d(l);try{return(await s.get(`/v1/clients/${o}/accounts`,{params:e})).data}catch(c){p(c)}}})}),Ca=e=>({list:()=>He({},e?.clientId||0,e?.tenantId)}),ha=(e,o,r)=>({input:{params:o,configuration:r},metadata:{commandName:"ListAccountsOfClient",path:`/v1/clients/${e}/accounts`,method:"GET"},execute:async i=>{r.tenantId&&(i.tenantId=r.tenantId);let m=await d(i);try{return(await m.get(`/v1/clients/${e}/accounts`,{params:o})).data}catch(l){p(l)}}});export{u as a,Gt as b,p as c,d,q as e,S as f,R as g,v as h,N as i,Qe as j,Zt as k,Ze as l,tt as m,nt as n,at as o,ot as p,en as q,bn as r,Cn as s,hn as t,In as u,xn as v,Sn as w,Hn as x,Yn as y,Jn as z,Xn as A,Qn as B,Zn as C,ea as D,qt as E,oa as F,jt as G,ra as H,$t as I,ia as J,_t as K,sa as L,ga as M,fa as N,ba as O,Ca as P,ha as Q};
